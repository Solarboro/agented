"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[307],{65:function(t,e,n){n.d(e,{Z:function(){return p}});var i=n(1413),c=n(9439),o=n(6061),r=n(7846),a=n(7128),l=n(5),s=n(3099),d=n(8764),u=n(2706),h=n(1306),m=n(7892),A=n.n(m),f=n(184);function p(t){var e=t.title,n=o.Z.useApp().modal,m=r.Z.useForm(),p=(0,c.Z)(m,1)[0],Z=(0,f.jsxs)(r.Z,{size:"middle",preserve:!1,form:p,children:[e&&(0,f.jsx)(a.Z,{children:e}),(0,f.jsx)(r.Z.Item,{label:"\u7c7b\u522b",name:"title",children:(0,f.jsx)(l.Z,{})}),(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(r.Z.Item,{name:"date",label:"\u652f\u4ed8\u65e5\u671f",rules:[{type:"object"}],children:(0,f.jsx)(d.Z,{inputReadOnly:!0})}),(0,f.jsx)(r.Z.Item,{name:"amount",label:"\u652f\u4ed8\u91d1\u989d",children:(0,f.jsx)(u.Z,{})})]}),(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(r.Z.Item,{name:"batch",label:"\u5bf9\u5e94\u6279\u6b21",children:(0,f.jsx)(u.Z,{})}),(0,f.jsx)(r.Z.Item,{name:"paid",label:"\u652f\u4ed8\u72b6\u6001",valuePropName:"checked",children:(0,f.jsx)(h.Z,{})})]})]});return function(t,e){p.setFieldsValue(t),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){p.validateFields().then((function(c){return e((0,i.Z)((0,i.Z)((0,i.Z)({},t),c),{},{date:1e3*A()(c.date).unix()}),n)})).catch(console.info)},content:Z})}}},4307:function(t,e,n){n.r(e),n.d(e,{default:function(){return G}});var i=n(3433),c=n(1413),o=n(9439),r=n(8944),a=n(9286),l=n(2622),s=n(7462),d=n(2791),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},h=n(4291),m=function(t,e){return d.createElement(h.Z,(0,s.Z)({},t,{ref:e,icon:u}))};var A=d.forwardRef(m),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},p=function(t,e){return d.createElement(h.Z,(0,s.Z)({},t,{ref:e,icon:f}))};var Z=d.forwardRef(p),x=n(2351),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.5 700.7a8 8 0 00-10.3-4.8L840 718.2V180c0-37.6-30.4-68-68-68H252c-37.6 0-68 30.4-68 68v538.2l-61.3-22.3c-.9-.3-1.8-.5-2.7-.5-4.4 0-8 3.6-8 8V763c0 3.3 2.1 6.3 5.3 7.5L501 910.1c7.1 2.6 14.8 2.6 21.9 0l383.8-139.5c3.2-1.2 5.3-4.2 5.3-7.5v-59.6c0-1-.2-1.9-.5-2.8zM512 837.5l-256-93.1V184h512v560.4l-256 93.1zM660.6 312h-54.5c-3 0-5.8 1.7-7.1 4.4l-84.7 168.8H511l-84.7-168.8a8 8 0 00-7.1-4.4h-55.7c-1.3 0-2.6.3-3.8 1-3.9 2.1-5.3 7-3.2 10.8l103.9 191.6h-57c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76v39h-76c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76V704c0 4.4 3.6 8 8 8h49.9c4.4 0 8-3.6 8-8v-63.5h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8h-76.3v-39h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8H564l103.7-191.6c.6-1.2 1-2.5 1-3.8-.1-4.3-3.7-7.9-8.1-7.9z"}}]},name:"money-collect",theme:"outlined"},j=function(t,e){return d.createElement(h.Z,(0,s.Z)({},t,{ref:e,icon:g}))};var E=d.forwardRef(j),y=n(9331),Q=n(3099),v=n(5820),C=n(6915),I=n(7128),k=n(6473),b=n(2242),B=n(8583),S=n(7174),w=n(3655),N=n(9555),R=n(3640),J=n(7257),P=n(1732),F=n(7892),z=n.n(F),K=n(65),H=n(7689),M=n(6061),Y=n(7846),O=n(9389),U=n(2706),D=n(184);var T=n(1306);var L=n(383);var G=(0,J.Pi)((function(){var t,e,n,s,u,h,m,f,p=(0,H.UO)().productStatus,g=(0,H.s0)(),j=P.n.product,J=P.n.updateProduct,F=P.n.updateStudio,G=P.n.setPaymentDetail;(0,d.useEffect)((function(){j.id||g("/product")}),[j]);var q=function(){return"factory"===p?2:1},V=(0,d.useState)(q()),X=(0,o.Z)(V,2),W=X[0],$=X[1],_=function(){switch(W){case 1:ut();break;case 2:xt();break;case 3:ct()}},tt=(0,K.Z)({title:"\u4ed8\u6b3e\u8bb0\u5f55"}),et=P.n.newPayment,nt=P.n.updatePayment,it=P.n.deletePayment,ct=function(){console.log("new payment item"),et(j.id,{})},ot=function(t,e){nt(P.n.product.id,t,e)},rt=[{title:"\u7c7b\u522b",dataIndex:"title",key:"title",width:"3.5em"},{title:"\u652f\u4ed8\u65e5\u671f",dataIndex:"date",key:"date",render:function(t,e){var n=e.date;return n?z()(n).format("YYYY.MM.DD"):"-"}},{title:"\u72b6\u6001",dataIndex:"paid",key:"paid",width:"6em",render:function(t,e){return e.paid?(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(r.Z,{style:{color:"green"}}),"\u5df2\u652f\u4ed8"]}):(0,D.jsx)(D.Fragment,{children:"-"})}},{title:"\u91d1\u989d",dataIndex:"amount",key:"amount",width:"3.5em"},{title:(0,D.jsx)(a.Z,{onClick:_,style:{color:"#006564"}}),key:"action",width:"100px",render:function(t,e){return(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(v.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return it(P.n.product.id,e.id)},children:(0,D.jsx)(l.Z,{style:{color:"red"}})}),(0,D.jsxs)("span",{onClick:function(){var t,n,o;G((0,c.Z)((0,c.Z)({},j),{},{qr:[null===L.H||void 0===L.H||null===(t=L.H.user)||void 0===t?void 0:t.paymentQR1,null===L.H||void 0===L.H||null===(n=L.H.user)||void 0===n?void 0:n.paymentQR2],amount:e.amount,payments:[e],custOrders:(0,i.Z)(null===j||void 0===j||null===(o=j.custOrders)||void 0===o?void 0:o.filter((function(t){return t.batch===e.batch})))})),g("/payment")},children:[" ",(0,D.jsx)(A,{style:{color:"#006564"}})," \u51fa\u5355"]})]})}}],at=function(t){var e=t.title,n=M.Z.useApp().modal,i=Y.Z.useForm(),r=(0,o.Z)(i,1)[0],a=(0,D.jsxs)(Y.Z,{layout:"horizontal",wrapperCol:{span:14},size:"middle",preserve:!1,form:r,children:[e&&(0,D.jsx)(I.Z,{children:e}),(0,D.jsx)(Y.Z.Item,{name:"size",label:"\u5c3a\u7801",children:(0,D.jsx)(O.Z,{})}),(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(Y.Z.Item,{name:"preCount",label:"\u9884\u5b9a\u4ef6\u6570",children:(0,D.jsx)(U.Z,{})}),(0,D.jsx)(Y.Z.Item,{name:"tolerance",label:"\u6d6e\u52a8\u4ef6\u6570",children:(0,D.jsx)(U.Z,{})}),(0,D.jsx)(Y.Z.Item,{name:"batch",label:"\u51fa\u5382\u6279\u6b21",children:(0,D.jsx)(U.Z,{})})]}),(0,D.jsxs)(Q.Z.Compact,{children:[(0,D.jsx)(Y.Z.Item,{name:"s1",label:"\u80f8\u56f4",children:(0,D.jsx)(U.Z,{})}),(0,D.jsx)(Y.Z.Item,{name:"s2",label:"\u8170\u56f4",children:(0,D.jsx)(U.Z,{})}),(0,D.jsx)(Y.Z.Item,{name:"s3",label:"\u8863\u957f",children:(0,D.jsx)(U.Z,{})})]})]});return function(t,e){r.setFieldsValue(t),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){r.validateFields().then((function(i){return e((0,c.Z)((0,c.Z)((0,c.Z)({},t),i),{},{date:1e3*z()(i.date).unix()}),n)})).catch(console.info)},content:a})}}({title:"\u89c4\u683c & \u6570\u91cf"}),lt=P.n.newCustOrder,st=P.n.updateCustOrder,dt=P.n.deleteCustOrder,ut=function(){console.log("new payment item"),lt(j.id,{})},ht=function(t,e){st(P.n.product.id,t,e)},mt=[{title:"\u5c3a\u7801",dataIndex:"size",key:"size",width:"3.5em"},{title:"\u80f8\u56f4",dataIndex:"s1",key:"s1",width:"3.5em"},{title:"\u8170\u56f4",dataIndex:"s2",key:"s2",width:"3.5em"},{title:"\u8863\u957f",dataIndex:"s3",key:"s3",width:"3.5em"},{title:"\u9884\u5b9a",dataIndex:"preCount",key:"preCount",width:"3.5em"},{title:"\u51fa\u5382",dataIndex:"actCount",key:"actCount",width:"3.5em"},{title:"\u6279\u6b21",dataIndex:"batch",key:"batch",width:"3.5em"},{title:(0,D.jsx)(a.Z,{onClick:_,style:{color:"#006564"}}),key:"action",render:function(t,e){return(0,D.jsx)(Q.Z,{children:(0,D.jsx)(v.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return dt(P.n.product.id,e.id)},children:(0,D.jsx)(l.Z,{style:{color:"red"}})})})}}],At=function(t){var e=t.title,n=M.Z.useApp().modal,i=Y.Z.useForm(),r=(0,o.Z)(i,1)[0],a=(0,D.jsxs)(Y.Z,{layout:"horizontal",wrapperCol:{span:14},size:"middle",preserve:!1,form:r,children:[e&&(0,D.jsx)(I.Z,{children:e}),(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(Y.Z.Item,{name:"label",label:"\u7c7b\u522b",children:(0,D.jsx)(O.Z,{})}),(0,D.jsx)(Y.Z.Item,{name:"specification",label:"\u89c4\u683c",children:(0,D.jsx)(O.Z,{})})]}),(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(Y.Z.Item,{name:"price",label:"\u5355\u4ef7",children:(0,D.jsx)(U.Z,{})}),(0,D.jsx)(Y.Z.Item,{name:"count",label:"\u6570\u91cf",children:(0,D.jsx)(U.Z,{})})]}),(0,D.jsx)(Y.Z.Item,{name:"factory",label:"\u5de5\u5382",valuePropName:"checked",children:(0,D.jsx)(T.Z,{})})]});return function(t,e){r.setFieldsValue(t),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){r.validateFields().then((function(i){return e((0,c.Z)((0,c.Z)((0,c.Z)({},t),i),{},{date:1e3*z()(i.date).unix()}),n)})).catch(console.info)},content:a})}}({title:"\u7269\u6599 & \u5de5\u5382"}),ft=P.n.newMaterials,pt=P.n.updateMaterials,Zt=P.n.deleteMaterials,xt=function(){console.log("new payment item"),ft(j.id,{})},gt=function(t,e){pt(P.n.product.id,t,e)},jt=[{title:"\u7269\u6599\u540d",dataIndex:"label",key:"label"},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification"},{title:"\u5355\u4ef7",dataIndex:"price",key:"price"},{title:"\u6570\u91cf",dataIndex:"count",key:"count"},{title:"\u603b\u4ef7",dataIndex:"amount",key:"amount"},{title:(0,D.jsx)(a.Z,{onClick:_,style:{color:"#006564"}}),key:"action",render:function(t,e){return(0,D.jsx)(Q.Z,{children:(0,D.jsx)(v.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return Zt(P.n.product.id,e.id)},children:(0,D.jsx)(l.Z,{style:{color:"red"}})})})}}],Et=[{key:1,label:"\u89c4\u683c & \u6570\u91cf",children:(0,D.jsx)(C.Z,{pagination:{position:[]},showHeader:!0,columns:mt,dataSource:null===(t=P.n.product)||void 0===t||null===(e=t.custOrders)||void 0===e?void 0:e.map((function(t){return(0,c.Z)({key:"custOrders".concat(t.id)},t)})),scroll:{y:240},summary:function(t){var e=0,n=0;return t.forEach((function(t){var i=t.preCount,c=t.actCount;e+=i,n+=c})),(0,D.jsxs)(C.Z.Summary.Row,{children:[(0,D.jsx)(C.Z.Summary.Cell,{index:0}),(0,D.jsx)(C.Z.Summary.Cell,{index:1}),(0,D.jsx)(C.Z.Summary.Cell,{index:2}),(0,D.jsx)(C.Z.Summary.Cell,{index:3}),(0,D.jsx)(C.Z.Summary.Cell,{index:4,children:e>0?e:""}),(0,D.jsx)(C.Z.Summary.Cell,{index:5,children:n>0?n:""})]})},onRow:function(t){return console.log("onclicek to here"),{onDoubleClick:function(e){return at((0,c.Z)((0,c.Z)({},t),{},{date:z()(t.date)}),ht)}}}})},{key:2,label:"\u7269\u6599 & \u5de5\u5382",children:(0,D.jsx)(C.Z,{pagination:{position:[]},showHeader:!0,columns:jt,dataSource:null===(n=P.n.product)||void 0===n||null===(s=n.materials)||void 0===s?void 0:s.map((function(t){return(0,c.Z)({key:"materials".concat(t.id)},t)})),scroll:{y:240},summary:function(t){var e=0;return t.forEach((function(t){var n=t.amount;e+=n})),(0,D.jsxs)(C.Z.Summary.Row,{children:[(0,D.jsx)(C.Z.Summary.Cell,{index:0}),(0,D.jsx)(C.Z.Summary.Cell,{index:1}),(0,D.jsx)(C.Z.Summary.Cell,{index:2}),(0,D.jsx)(C.Z.Summary.Cell,{index:3}),(0,D.jsx)(C.Z.Summary.Cell,{index:4,children:e>0?e:""})]})},onRow:function(t){return{onDoubleClick:function(e){return At((0,c.Z)((0,c.Z)({},t),{},{date:z()(t.date)}),gt)}}}})},{key:3,label:"\u8d26\u5355 & \u8bb0\u5f55",children:(0,D.jsx)(C.Z,{pagination:{position:[]},showHeader:!0,columns:rt,dataSource:null===(u=P.n.product)||void 0===u||null===(h=u.payments)||void 0===h?void 0:h.map((function(t){return(0,c.Z)({key:"payments".concat(t.id)},t)})),scroll:{y:240},summary:function(t){var e=0;return t.forEach((function(t){var n=t.amount;e+=n})),(0,D.jsxs)(C.Z.Summary.Row,{children:[(0,D.jsx)(C.Z.Summary.Cell,{index:0}),(0,D.jsx)(C.Z.Summary.Cell,{index:1}),(0,D.jsx)(C.Z.Summary.Cell,{index:2}),(0,D.jsx)(C.Z.Summary.Cell,{index:3,children:e>0?e:""})]})},onRow:function(t){return{onDoubleClick:function(){return tt((0,c.Z)((0,c.Z)({},t),{},{date:z()(t.date)}),ot)}}}})}],yt=function(){var t,e=0;return null===j||void 0===j||null===(t=j.custOrders)||void 0===t||t.forEach((function(t){e+=t.actCount})),e},Qt={name:"file",action:"https://solarboro.top:1181/api/upload",headers:{authorization:"Basic c29sYXI6NjY2NjY2"},onChange:function(t){var e,n;("uploading"!==t.file.status&&console.log(t.file,t.fileList),"done"===t.file.status)?(n=null===t||void 0===t||null===(e=t.file)||void 0===e?void 0:e.response,J({id:j.id,image:n}),console.log("".concat(t.file.name," file uploaded successfully"))):"error"===t.file.status&&console.log("".concat(t.file.name," file upload failed"))}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(I.Z,{orientation:"left",children:function(t){switch(t){case"pending":return"\u6d3d\u8c08\u4e2d";case"studio":return(0,D.jsxs)(D.Fragment,{children:["\u6837\u677f\u4e2d",(0,D.jsx)(I.Z,{type:"vertical"}),(0,D.jsxs)(v.Z,{placement:"bottomRight",title:"\u56de\u6eda\u72b6\u6001",description:"\u56de\u9000\u81f3 \u6d3d\u8c08\u9636\u6bb5 ?",onConfirm:function(){return P.n.fallbackStatus(j.id)},children:[(0,D.jsx)(Z,{style:{color:"#006564"}})," \u56de\u9000"]})]});case"factory":return(0,D.jsxs)(D.Fragment,{children:["\u6295\u4ea7\u4e2d",(0,D.jsx)(I.Z,{type:"vertical"}),(0,D.jsxs)(v.Z,{placement:"bottomRight",title:"\u56de\u6eda\u72b6\u6001",description:"\u56de\u9000\u81f3 \u6837\u677f\u9636\u6bb5 ?",onConfirm:function(){return P.n.fallbackStatus(j.id)},children:[(0,D.jsx)(Z,{style:{color:"#006564"}})," \u56de\u9000"]})]});case"pending":return"\u5f85\u5c3e\u6b3e";default:return"-"}}(j.productStatus)}),(0,D.jsxs)(Q.Z.Compact,{direction:"vertical",style:{display:"flex"},children:[(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(k.Z,{style:{width:"140px"},cover:(0,D.jsx)(b.Z,{src:"".concat("https://solarboro.top:1181/images/").concat(j.image),fallback:"data:image/png;base64,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"}),children:(0,D.jsx)(k.Z.Meta,{description:(0,D.jsxs)(B.Z,(0,c.Z)((0,c.Z)({},Qt),{},{style:{position:""},children:[(0,D.jsx)(x.Z,{})," \u66f4\u65b0\u56fe\u7247"]}))})}),(0,D.jsx)(k.Z,{children:(0,D.jsxs)(S.Z,{column:1,children:[(0,D.jsx)(S.Z.Item,{label:"\u5ba2\u6237",children:(0,D.jsx)(w.Z.Text,{editable:{onChange:function(t){return J({id:j.id,custName:t})}},children:j.custName})}),(0,D.jsx)(S.Z.Item,{label:"\u7f16\u53f7",children:(0,D.jsx)(w.Z.Text,{editable:{onChange:function(t){J({id:j.id,model:t})}},children:j.model})}),(0,D.jsx)(S.Z.Item,{label:"\u6b3e\u5f0f",children:(0,D.jsx)(w.Z.Text,{editable:{onChange:function(t){J({id:j.id,style:t})}},children:j.style})}),(0,D.jsx)(S.Z.Item,{label:"\u677f\u95f4",children:(0,D.jsx)(N.Z,{onChange:F,style:{width:"100%"},defaultValue:null===(m=j.sampleOrder)||void 0===m?void 0:m.studioName,options:[{value:1,label:701},{value:2,label:"\u5176\u4ed6\u677f\u95f4"}]})}),(0,D.jsx)(S.Z.Item,{label:"\u677f\u5e08",children:null!==(f=j.sampleOrder)&&void 0!==f&&f.producerName?(0,D.jsxs)(D.Fragment,{children:[j.sampleOrder.producerName," (",j.sampleOrder.cost,"\u5c0f\u65f6)"]}):"-"}),(0,D.jsx)(S.Z.Item,{label:"\u4ef6\u6570",children:(0,D.jsxs)(Q.Z,{children:[yt(),"(",(0,D.jsx)(w.Z.Text,{type:"success",children:Math.round(j.amount/yt()*100)/100}),")"]})}),(0,D.jsxs)(S.Z.Item,{label:"\u8d39\u7528",children:[function(){var t,e=0;return null===j||void 0===j||null===(t=j.materials)||void 0===t||t.forEach((function(t){e+=t.amount})),e}()," "]}),(0,D.jsx)(S.Z.Item,{label:"\u5df2\u6536\u6b3e",children:(0,D.jsx)(w.Z.Text,{type:"danger",children:(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(E,{}),function(){var t,e=0;return null===j||void 0===j||null===(t=j.payments)||void 0===t||t.forEach((function(t){t.paid&&(e+=t.amount)})),e}()]})})}),(0,D.jsx)(S.Z.Item,{label:"\u603b\u552e\u4ef7",children:(0,D.jsx)(w.Z.Text,{type:"success",editable:{onChange:function(t){J({id:j.id,amount:t})}},children:(0,D.jsxs)(Q.Z,{children:[(0,D.jsx)(y.Z,{}),j.amount>0?j.amount:0]})})})]})})]}),(0,D.jsx)(R.Z,{centered:!0,defaultActiveKey:q(),onChange:$,items:Et})]})]})}))},1732:function(t,e,n){n.d(e,{n:function(){return d}});var i=n(1413),c=n(3433),o=n(5671),r=n(3144),a=n(4098),l=n(3760),s=n(383),d=new(function(){function t(){var e=this;(0,o.Z)(this,t),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.studio701Products=[],this.statistic701=[],this.statistic701Period=[],this.statistic701PeriodFilter="",this.statistic701Producer=[],this.statistic701ProducerFilter="",this.paymentDetail={},this.get701Statistic=function(){l.Z.get("/statistic/studio/701").then((function(t){e.statistic701=(0,c.Z)(t.data),e.statistic701Period=(0,c.Z)(new Set(e.statistic701.map((function(t){return t.period})))),e.statistic701Producer=(0,c.Z)(new Set(e.statistic701.map((function(t){return t.producer})))),e.statistic701PeriodFilter=e.statistic701PeriodFilter||e.statistic701Period.at(-1),e.statistic701ProducerFilter=e.statistic701ProducerFilter||e.statistic701Producer.at(-1),console.log(e.statistic701Period),console.log(e.statistic701Producer)})).catch(console.log)},this.get701Products=function(){l.Z.get("product/701").then((function(t){e.studio701Products=(0,c.Z)(t.data)})).catch(console.log)},this.setPaymentDetail=function(t){e.paymentDetail=(0,i.Z)({},t)},this.selectd=function(t){e.product=(0,i.Z)({},t)},this.fallbackStatus=function(t){l.Z.get("product/".concat(t,"/fallbackStatus")).then((function(n){e.products=[].concat((0,c.Z)(e.products.filter((function(e){return e.id!==t}))),[n.data])})).catch(console.log)},this.updateFilter=function(t){return e.filter=t},this.new=function(){l.Z.post("product",{}).then((function(t){e.products=[].concat((0,c.Z)(e.products),[t.data])})).catch(console.log)},this.updateProduct=function(t){l.Z.put("product",t).then((function(t){e.products=[].concat((0,c.Z)(e.products.filter((function(e){return e.id!==t.data.id}))),[t.data]),e.product=(0,i.Z)({},t.data)})).catch(console.log)},this.index=function(){l.Z.get("product").then((function(t){e.products=(0,c.Z)(t.data)})).catch((function(t){console.log(t)}))},this.del=function(t){l.Z.delete("product/".concat(t)).then((function(n){return e.products.splice(e.products.findIndex((function(e){return e.id===t})),1)})).catch(console.log)},this.getByFilter=function(){var t=e.products.filter((function(t){return t.productStatus===e.filter}));switch(e.filter){case"pending":case"studio":case"factory":return t.sort((function(t,e){return t.cdate-e.cdate}));default:return t}},this.updateStudio=function(t){console.log(t),l.Z.put("product/".concat(e.product.id,"/studio"),{id:t}).then((function(t){e.product=(0,i.Z)((0,i.Z)({},e.product),{},{sampleOrder:t.data}),e.products.splice(e.products.findIndex((function(t){return t.id===e.product.id})),1,e.product)})).catch(console.log)},this.updateStudioDetail=function(t,n){l.Z.put("product/".concat(t,"/sample"),n).then((function(t){return e.get701Products()})).catch(console.log)},this.newPayment=function(t,n){l.Z.post("product/".concat(t,"/payment"),(0,i.Z)({},n)).then((function(t){e.product.payments.push((0,i.Z)({},t.data))})).catch(console.error)},this.updatePayment=function(t,n,c){l.Z.put("product/".concat(t,"/payment"),(0,i.Z)({},n)).then((function(t){var n=t.data,o=e.product.payments.findIndex((function(t){return t.id===n.id}));e.product.payments.splice(o,1,(0,i.Z)({},n)),c()})).catch(console.error)},this.deletePayment=function(t,n){l.Z.delete("product/".concat(t,"/payment/").concat(n)).then((function(t){var i=e.product.payments.findIndex((function(t){return t.id===n}));e.product.payments.splice(i,1)})).catch(console.error)},this.newCustOrder=function(t,n){l.Z.post("product/".concat(t,"/custOrder"),(0,i.Z)({},n)).then((function(t){e.product.custOrders.push((0,i.Z)({},t.data))})).catch(console.error)},this.updateCustOrder=function(t,n,c){l.Z.put("product/".concat(t,"/custOrder"),(0,i.Z)({},n)).then((function(t){var n=t.data,o=e.product.custOrders.findIndex((function(t){return t.id===n.id}));e.product.custOrders.splice(o,1,(0,i.Z)({},n)),c()})).catch(console.error)},this.deleteCustOrder=function(t,n){l.Z.delete("product/".concat(t,"/custOrder/").concat(n)).then((function(t){var i=e.product.custOrders.findIndex((function(t){return t.id===n}));e.product.custOrders.splice(i,1)})).catch(console.error)},this.newMaterials=function(t,n){l.Z.post("product/".concat(t,"/material"),(0,i.Z)({},n)).then((function(t){e.product.materials.push((0,i.Z)({},t.data))})).catch(console.error)},this.updateMaterials=function(t,n,c){l.Z.put("product/".concat(t,"/material"),(0,i.Z)({},n)).then((function(t){var n=t.data,o=e.product.materials.findIndex((function(t){return t.id===n.id}));e.product.materials.splice(o,1,(0,i.Z)({},n)),c()})).catch(console.error)},this.deleteMaterials=function(t,n){l.Z.delete("product/".concat(t,"/material/").concat(n)).then((function(t){var i=e.product.materials.findIndex((function(t){return t.id===n}));e.product.materials.splice(i,1)})).catch(console.error)},(0,a.ky)(this),s.H.isLogin&&this.index()}return(0,r.Z)(t,[{key:"getFilterTemplate",get:function(){var t=this;return this.filterTemplate.forEach((function(e){e.value=t.products.filter((function(t){return t.productStatus===e.key})).length})),this.filterTemplate}}]),t}())},8944:function(t,e,n){n.d(e,{Z:function(){return l}});var i=n(7462),c=n(2791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},r=n(4291),a=function(t,e){return c.createElement(r.Z,(0,i.Z)({},t,{ref:e,icon:o}))};var l=c.forwardRef(a)}}]);
//# sourceMappingURL=307.b0393b2d.chunk.js.map