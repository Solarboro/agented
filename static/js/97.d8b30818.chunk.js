"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[97],{6280:function(t,e,n){n.d(e,{Z:function(){return d}});var r=n(9439),c=n(9529),o=n(8999),a=n(6061),i=n(7846),s=n(7128),u=n(9389),l=n(184);function d(){var t=a.Z.useApp().modal,e=i.Z.useForm(),n=(0,r.Z)(e,1)[0],d=(0,l.jsxs)(i.Z,{size:"middle",preserve:!1,form:n,initialValues:{username:"solar",password:"abcd1234"},children:[(0,l.jsx)(s.Z,{children:"\u7528\u6237\u767b\u5165 "}),(0,l.jsx)(i.Z.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7!"}],children:(0,l.jsx)(u.Z,{prefix:(0,l.jsx)(c.Z,{className:"site-form-item-icon"}),placeholder:"Username / \u8d26\u6237 / \u624b\u673a\u53f7"})}),(0,l.jsx)(i.Z.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}],children:(0,l.jsx)(u.Z,{prefix:(0,l.jsx)(o.Z,{className:"site-form-item-icon"}),type:"password",placeholder:"Password / \u5bc6\u7801"})})]});return function(e){t.confirm({icon:!0,okText:"\u767b\u5f55",onOk:function(t){n.validateFields().then((function(n){return e(n,t)})).catch(console.info)},content:d})}}},65:function(t,e,n){n.d(e,{Z:function(){return p}});var r=n(1413),c=n(9439),o=n(6061),a=n(7846),i=n(7128),s=n(9555),u=n(8764),l=n(2706),d=n(1306),A=n(7892),f=n.n(A),h=n(184);function p(t){var e=t.title,n=o.Z.useApp().modal,A=a.Z.useForm(),p=(0,c.Z)(A,1)[0],E=(0,h.jsxs)(a.Z,{size:"middle",preserve:!1,form:p,children:[e&&(0,h.jsx)(i.Z,{children:e}),(0,h.jsx)(a.Z.Item,{label:"\u7c7b\u522b",name:"title",children:(0,h.jsx)(s.Z,{options:[{value:"1",label:"\u8ba2\u91d1"},{value:"2",label:"\u671f\u6b3e"},{value:"3",label:"\u5c3e\u6b3e"}]})}),(0,h.jsx)(a.Z.Item,{name:"date",label:"\u652f\u4ed8\u65e5\u671f",rules:[{type:"object"}],children:(0,h.jsx)(u.Z,{inputReadOnly:!0})}),(0,h.jsx)(a.Z.Item,{name:"amount",label:"\u652f\u4ed8\u91d1\u989d",children:(0,h.jsx)(l.Z,{})}),(0,h.jsx)(a.Z.Item,{name:"paid",label:"\u652f\u4ed8\u72b6\u6001",valuePropName:"checked",children:(0,h.jsx)(d.Z,{})})]});return function(t,e){p.setFieldsValue(t),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){p.validateFields().then((function(c){return e((0,r.Z)((0,r.Z)((0,r.Z)({},t),c),{},{date:1e3*f()(c.date).unix()}),n)})).catch(console.info)},content:E})}}},2735:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(9439),c=n(2791);function o(){var t="API_KEY",e=(0,c.useState)(localStorage.getItem(t)),n=(0,r.Z)(e,2),o=n[0],a=n[1];return(0,c.useEffect)((function(){o&&localStorage.setItem(t,o)}),[o]),[o,a]}},5749:function(t,e,n){n.r(e),n.d(e,{default:function(){return K}});var r=n(7762),c=n(9439),o=n(2622),a=n(7462),i=n(2791),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},u=n(4291),l=function(t,e){return i.createElement(u.Z,(0,a.Z)({},t,{ref:e,icon:s}))};var d=i.forwardRef(l),A=n(6061),f=n(5820),h=n(2339),p=n(1429),E=n(7128),g=n(4248),Q=n(6473),Z=n(8792),m=n(2242),v=n(5485),y=n(7309),B=n(7257),I=n(7892),x=n.n(I),j=n(7689),C=n(65),k=n(383),N=n(1732),S=n(6280),J=n(2735),b=n(184);var K=(0,B.Pi)((function(){(0,i.useEffect)((function(){k.H.isLogin&&N.n.index()}),[]);var t=(0,j.s0)(),e=((0,C.Z)({title:"\u8d26\u5355"}),A.Z.useApp().message,(0,S.Z)(),(0,J.Z)()),n=(0,c.Z)(e,2),a=(n[0],n[1],function(t){var e=[],n=(0,b.jsxs)(f.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",description:"".concat(t.style,"-").concat(t.model),onConfirm:function(){return N.n.del(t.id)},okText:"Yes",cancelText:"No",children:[(0,b.jsx)(o.Z,{style:{color:"red"}})," \u79fb\u9664"]}),c=(0,b.jsxs)(f.Z,{placement:"topRight",title:"\u56de\u6eda\u72b6\u6001",description:"".concat(t.style,"-").concat(t.model),onConfirm:function(){return N.n.fallbackStatus(t.id)},okText:"Yes",cancelText:"No",children:[(0,b.jsx)(d,{style:{color:"red"}})," \u56de\u6eda"]}),a=(0,b.jsxs)(h.Z,{color:"success",children:[t.sampleOrder.studioName," ",t.sampleOrder.producerName?t.sampleOrder.producerName+" "+t.sampleOrder.cost+" \u5c0f\u65f6":"\u6392\u961f\u4e2d"]});switch(t.productStatus){case"pending":e.push(n);break;case"studio":e.push(a),e.push(c);break;case"factory":var i,s=0,u=(0,r.Z)(t.materials);try{for(u.s();!(i=u.n()).done;){s+=i.value.amount}}catch(A){u.e(A)}finally{u.f()}var l=(0,b.jsxs)(h.Z,{color:"error",children:[s," \u5143"]});e.push(l),e.push(c)}return e}),s=function(t){var e=x()().diff(x()(t),"days");switch(!0){case 0===e:return(0,b.jsx)(h.Z,{color:"success",children:"\u4eca\u5929"});case e<3:return(0,b.jsxs)(h.Z,{color:"warning",children:[e," \u5929\u524d"]});default:return(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(h.Z,{color:"error",children:"\u8bf7\u8ddf\u8fdb"})," ",x()(t).format("YYYY.MM.DD")," "]})}};return(0,b.jsxs)("div",{className:"about",children:[(0,b.jsx)(E.Z,{orientation:"left",children:"\u6982\u8981"}),(0,b.jsx)(g.Z,{default:N.n.filter,onChange:N.n.updateFilter,block:!0,options:N.n.getFilterTemplate.map((function(t){return{label:(0,b.jsx)(p.Z,{title:t.title,value:t.value,valueStyle:{color:t.color}}),value:t.key}}))}),(0,b.jsx)(Q.Z,{children:(0,b.jsx)(Z.ZP,{size:"middle",itemLayout:"horizontal",pagination:{pageSize:5,simple:!0,position:"bottom",align:"end"},dataSource:N.n.getByFilter(),renderItem:function(e){return(0,b.jsx)(Z.ZP.Item,{actions:a(e),children:(0,b.jsx)(Z.ZP.Item.Meta,{onClick:function(){N.n.product=e,t("/product/detail")},avatar:(0,b.jsx)(m.Z,{width:30,height:40,src:"error",fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}),title:(0,b.jsxs)(b.Fragment,{children:[e.style?e.style:"-"," ",e.model," "]}),description:(0,b.jsx)(v.Z.Text,{type:"secondary",ellipsis:!0,children:s(e.cdate)})})})}})}),(0,b.jsx)("br",{}),(0,b.jsx)(y.ZP,{onClick:function(){return N.n.new()},size:"large",type:"primary",block:!0,children:" \u5ba2\u5355\u6dfb\u52a0 "})]})}))},1732:function(t,e,n){n.d(e,{n:function(){return l}});var r=n(7762),c=n(3433),o=n(1413),a=n(5671),i=n(3144),s=n(4098),u=n(3760),l=new(function(){function t(){var e=this;(0,a.Z)(this,t),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.selectd=function(t){e.product=(0,o.Z)({},t)},this.fallbackStatus=function(t){u.Z.get("product/".concat(t,"/fallbackStatus")).then((function(n){e.products=[].concat((0,c.Z)(e.products.filter((function(e){return e.id!==t}))),[n.data])})).catch(console.log)},this.updateFilter=function(t){return e.filter=t},this.new=function(){u.Z.post("product",{}).then((function(t){e.products=[].concat((0,c.Z)(e.products),[t.data])})).catch(console.log)},this.updateProduct=function(t){u.Z.put("product",t).then((function(n){console.log(n.data),e.products=[].concat((0,c.Z)(e.products.filter((function(e){return e.id!==t.id}))),[n.data]),e.product=(0,o.Z)({},n.data)})).catch(console.log)},this.index=function(){u.Z.get("product").then((function(t){e.products=(0,c.Z)(t.data)})).catch((function(t){console.log(t)}))},this.del=function(t){u.Z.delete("product/".concat(t)).then((function(n){return e.products.splice(e.products.findIndex((function(e){return e.id===t})),1)})).catch(console.log)},this.getByFilter=function(){var t=e.products.filter((function(t){return t.productStatus===e.filter}));switch(e.filter){case"pending":return t.sort((function(t,e){return t.cdate-e.cdate}));case"studio":return t.sort((function(t,e){return t.sampleOrder.manufactureDates-e.sampleOrder.manufactureDates}));case"factory":return t.sort((function(t,e){return t.mdate-e.mdate}));default:return t}},this.updateStudio=function(t){console.log(t),u.Z.put("/product/".concat(e.product.id,"/studio"),{id:t}).then((function(t){return e.product=(0,o.Z)((0,o.Z)({},e.product),{},{sampleOrder:t.data})})).catch(console.log)},this.newPayment=function(t,n){u.Z.post("product/".concat(t,"/payment"),(0,o.Z)({},n)).then((function(n){var c,a=(0,r.Z)(e.products);try{for(a.s();!(c=a.n()).done;){var i=c.value;i.id===t&&i.payments.push((0,o.Z)({},n.data))}}catch(s){a.e(s)}finally{a.f()}})).catch(console.error)},this.updatePayment=function(t,n,c){u.Z.put("product/".concat(t,"/payment"),(0,o.Z)({},n)).then((function(n){var a,i=n.data,s=(0,r.Z)(e.products);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.id===t){var l=u.payments.findIndex((function(t){return t.id===i.id}));u.payments.splice(l,1,(0,o.Z)({},i))}}}catch(d){s.e(d)}finally{s.f()}c()})).catch(console.error)},this.deletePayment=function(t,n){u.Z.delete("product/".concat(t,"/payment/").concat(n)).then((function(c){var o,a=(0,r.Z)(e.products);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(i.id===t){var s=i.payments.findIndex((function(t){return t.id===n}));i.payments.splice(s,1)}}}catch(u){a.e(u)}finally{a.f()}})).catch(console.error)},this.newCustOrder=function(t,n){u.Z.post("product/".concat(t,"/custOrder"),(0,o.Z)({},n)).then((function(n){var c,a=(0,r.Z)(e.products);try{for(a.s();!(c=a.n()).done;){var i=c.value;i.id===t&&i.custOrders.push((0,o.Z)({},n.data))}}catch(s){a.e(s)}finally{a.f()}})).catch(console.error)},this.updateCustOrder=function(t,n,c){u.Z.put("product/".concat(t,"/custOrder"),(0,o.Z)({},n)).then((function(n){var a,i=n.data,s=(0,r.Z)(e.products);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.id===t){var l=u.custOrders.findIndex((function(t){return t.id===i.id}));u.custOrders.splice(l,1,(0,o.Z)({},i))}}}catch(d){s.e(d)}finally{s.f()}c()})).catch(console.error)},this.deleteCustOrder=function(t,n){u.Z.delete("product/".concat(t,"/custOrder/").concat(n)).then((function(c){var o,a=(0,r.Z)(e.products);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(i.id===t){var s=i.custOrders.findIndex((function(t){return t.id===n}));i.custOrders.splice(s,1)}}}catch(u){a.e(u)}finally{a.f()}})).catch(console.error)},this.newMaterials=function(t,n){u.Z.post("product/".concat(t,"/material"),(0,o.Z)({},n)).then((function(n){var c,a=(0,r.Z)(e.products);try{for(a.s();!(c=a.n()).done;){var i=c.value;i.id===t&&i.materials.push((0,o.Z)({},n.data))}}catch(s){a.e(s)}finally{a.f()}})).catch(console.error)},this.updateMaterials=function(t,n,c){u.Z.put("product/".concat(t,"/material"),(0,o.Z)({},n)).then((function(n){var a,i=n.data,s=(0,r.Z)(e.products);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.id===t){var l=u.materials.findIndex((function(t){return t.id===i.id}));u.materials.splice(l,1,(0,o.Z)({},i))}}}catch(d){s.e(d)}finally{s.f()}c()})).catch(console.error)},this.deleteMaterials=function(t,n){u.Z.delete("product/".concat(t,"/material/").concat(n)).then((function(c){var o,a=(0,r.Z)(e.products);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(i.id===t){var s=i.materials.findIndex((function(t){return t.id===n}));i.materials.splice(s,1)}}}catch(u){a.e(u)}finally{a.f()}})).catch(console.error)},(0,s.ky)(this)}return(0,i.Z)(t,[{key:"getFilterTemplate",get:function(){var t=this;return this.filterTemplate.forEach((function(e){e.value=t.products.filter((function(t){return t.productStatus===e.key})).length})),this.filterTemplate}}]),t}())}}]);
//# sourceMappingURL=97.d8b30818.chunk.js.map