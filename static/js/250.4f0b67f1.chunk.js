"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[250],{65:function(t,e,n){n.d(e,{Z:function(){return m}});var r=n(1413),o=n(9439),i=n(6185),a=n(7846),c=n(7128),u=n(9555),s=n(8764),l=n(2706),d=n(1306),f=n(7892),p=n.n(f),h=n(184);function m(t){var e=t.title,n=i.Z.useApp().modal,f=a.Z.useForm(),m=(0,o.Z)(f,1)[0],Z=(0,h.jsxs)(a.Z,{size:"middle",preserve:!1,form:m,children:[e&&(0,h.jsx)(c.Z,{children:e}),(0,h.jsx)(a.Z.Item,{label:"\u7c7b\u522b",name:"title",children:(0,h.jsx)(u.Z,{options:[{value:"1",label:"\u8ba2\u91d1"},{value:"2",label:"\u671f\u6b3e"},{value:"3",label:"\u5c3e\u6b3e"}]})}),(0,h.jsx)(a.Z.Item,{name:"date",label:"\u652f\u4ed8\u65e5\u671f",rules:[{type:"object"}],children:(0,h.jsx)(s.Z,{inputReadOnly:!0})}),(0,h.jsx)(a.Z.Item,{name:"amount",label:"\u652f\u4ed8\u91d1\u989d",children:(0,h.jsx)(l.Z,{})}),(0,h.jsx)(a.Z.Item,{name:"paid",label:"\u652f\u4ed8\u72b6\u6001",valuePropName:"checked",children:(0,h.jsx)(d.Z,{})})]});return function(t,e){m.setFieldsValue(t),n.confirm({icon:!0,okText:"\u63d0\u4ea4",onOk:function(n){m.validateFields().then((function(o){return e((0,r.Z)((0,r.Z)((0,r.Z)({},t),o),{},{date:1e3*p()(o.date).unix()}),n)})).catch(console.info)},content:Z})}}},5844:function(t,e,n){n.r(e);var r=n(1413),o=n(8944),i=n(2622),a=n(3099),c=n(5820),u=n(7128),s=n(7309),l=n(3971),d=n(7257),f=n(1732),p=n(7892),h=n.n(p),m=n(65),Z=n(184);e.default=(0,d.Pi)((function(){var t=f.n.product,e=t.id,n=t.payments,d=(t.sampleOrder,t.custOrders,t.materials,(0,m.Z)({title:"\u8bb0\u5f55\u7f16\u8f91"})),p=f.n.newPayment,y=f.n.updatePayment,x=f.n.deletePayment,v=function(t,n){y(e,t,n)},j=[{title:"\u7c7b\u522b",dataIndex:"title",key:"title",width:"3.5em",render:function(t,e){switch(e.title){case"1":return"\u5b9a\u91d1";case"2":return"\u671f\u91d1";case"3":return"\u5c3e\u6b3e";default:return"\u5176\u4ed6"}}},{title:"\u652f\u4ed8\u65e5\u671f",dataIndex:"date",key:"date",render:function(t,e){var n=e.date;return h()(n).format("YYYY.MM.DD")?h()(n).format("YYYY.MM.DD"):"-"}},{title:"\u652f\u4ed8\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(t,e){return e.paid?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(o.Z,{style:{color:"green"}}),"\u5df2\u652f\u4ed8"]}):(0,Z.jsx)(Z.Fragment,{children:"-"})}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount"},{title:"\u64cd\u4f5c",key:"action",render:function(t,n){return(0,Z.jsxs)(a.Z,{children:[(0,Z.jsx)(c.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return x(e,n.id)},okText:"Yes",cancelText:"No",children:(0,Z.jsx)(i.Z,{style:{color:"red"}})}),(0,Z.jsx)("a",{onClick:function(){return d((0,r.Z)((0,r.Z)({},n),{},{date:h()(n.date)}),v)},children:"\u7f16\u8f91"})]})}}];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(u.Z,{orientation:"left",children:"\u4ed8\u6b3e\u8bb0\u5f55"}),(0,Z.jsx)(s.ZP,{onClick:function(){p(e,{})},children:"new Payment"}),(0,Z.jsx)(l.Z,{pagination:{position:[]},showHeader:!0,columns:j,dataSource:n.map((function(t){return(0,r.Z)({key:"paymentKey_".concat(t.id)},t)}))}),(0,Z.jsx)(u.Z,{orientation:"left",children:"\u89c4\u683c\u6570\u91cf"}),(0,Z.jsx)(l.Z,{pagination:{position:[]},showHeader:!0,columns:j,dataSource:n.map((function(t){return(0,r.Z)({key:"paymentKey_".concat(t.id)},t)}))}),(0,Z.jsx)(u.Z,{orientation:"left",children:"\u7269\u6599 & \u5de5\u5382"}),(0,Z.jsx)(l.Z,{pagination:{position:[]},showHeader:!0,columns:j,dataSource:n.map((function(t){return(0,r.Z)({key:"paymentKey_".concat(t.id)},t)}))})]})}))},1732:function(t,e,n){n.d(e,{n:function(){return l}});var r=n(7762),o=n(3433),i=n(1413),a=n(5671),c=n(3144),u=n(4098),s=n(129),l=new(function(){function t(){var e=this;(0,a.Z)(this,t),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.selectd=function(t){e.product=(0,i.Z)({},t)},this.updateFilter=function(t){return e.filter=t},this.new=function(){s.Z.post("product",{}).then((function(t){e.products=[].concat((0,o.Z)(e.products),[t.data])})).catch(console.log)},this.index=function(){s.Z.get("product").then((function(t){e.products=(0,o.Z)(t.data)})).catch((function(t){console.log(t)}))},this.del=function(t){s.Z.delete("product/".concat(t)).then((function(n){return e.products.splice(e.products.findIndex((function(e){return e.id===t})),1)}))},this.getByFilter=function(){var t=e.products.filter((function(t){return t.productStatus===e.filter}));switch(e.filter){case"pending":return t.sort((function(t,e){return t.cdate-e.cdate}));case"studio":return t.sort((function(t,e){return t.sampleOrder.manufactureDates-e.sampleOrder.manufactureDates}));case"factory":return t.sort((function(t,e){return t.mdate-e.mdate}));default:return t}},this.newPayment=function(t,n){s.Z.post("product/".concat(t,"/payment"),(0,i.Z)({},n)).then((function(n){var o,a=(0,r.Z)(e.products);try{for(a.s();!(o=a.n()).done;){var c=o.value;c.id===t&&c.payments.push((0,i.Z)({},n.data))}}catch(u){a.e(u)}finally{a.f()}})).catch(console.error)},this.updatePayment=function(t,n,o){s.Z.put("product/".concat(t,"/payment"),(0,i.Z)({},n)).then((function(n){var a,c=n.data,u=(0,r.Z)(e.products);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.id===t){var l=s.payments.findIndex((function(t){return t.id===c.id}));s.payments.splice(l,1,(0,i.Z)({},c))}}}catch(d){u.e(d)}finally{u.f()}o()})).catch(console.error)},this.deletePayment=function(t,n){s.Z.delete("product/".concat(t,"/payment/").concat(n)).then((function(o){var i,a=(0,r.Z)(e.products);try{for(a.s();!(i=a.n()).done;){var c=i.value;if(c.id===t){var u=c.payments.findIndex((function(t){return t.id===n}));c.payments.splice(u,1)}}}catch(s){a.e(s)}finally{a.f()}})).catch(console.error)},(0,u.ky)(this)}return(0,c.Z)(t,[{key:"getFilterTemplate",get:function(){var t=this;return this.filterTemplate.forEach((function(e){e.value=t.products.filter((function(t){return t.productStatus===e.key})).length})),this.filterTemplate}}]),t}())},129:function(t,e,n){var r=n(1243).Z.create({baseURL:"http://aruchi.top:1182",timeout:3e3});r.interceptors.request.use((function(t){return console.info(t),localStorage.getItem("API_KEY")&&"login"!==t.url&&(t.headers.Authorization="Bearer ".concat(localStorage.getItem("API_KEY"))),t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return console.info("start"),console.info(t),console.info("end"),Promise.reject(t)})),e.Z=r}}]);
//# sourceMappingURL=250.4f0b67f1.chunk.js.map