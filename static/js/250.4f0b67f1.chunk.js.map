{"version":3,"file":"static/js/250.4f0b67f1.chunk.js","mappings":"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","sources":["comp/payment.js","pages/product/detail/index.js","store/productStore.js","utils/http.js"],"sourcesContent":["import { LockOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { App, DatePicker, Divider, Form, Input, InputNumber, Select, Switch } from \"antd\";\r\nimport dayjs from 'dayjs'\r\n\r\nexport default function usePaymentPanel({title}){\r\n\r\n    const {modal} = App.useApp();\r\n    const [form] = Form.useForm();\r\n    const content = (\r\n        <Form\r\n            size='middle'\r\n            preserve={false}\r\n            form={form}            \r\n        >\r\n\r\n          {title && <Divider>{title}</Divider>}\r\n          <Form.Item\r\n            label=\"类别\"\r\n            name=\"title\"\r\n          >\r\n            <Select\r\n              \r\n              options={[\r\n                {value: '1', label: '订金'},\r\n                {value: '2', label: '期款'},\r\n                {value: '3', label: '尾款'}\r\n                \r\n              ]}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"date\" label=\"支付日期\" rules={[{type: 'object'}]} >\r\n            <DatePicker inputReadOnly  />\r\n          </Form.Item>\r\n      \r\n          <Form.Item name=\"amount\" label=\"支付金额\"  >\r\n            <InputNumber />\r\n          </Form.Item>\r\n\r\n      \r\n          <Form.Item name=\"paid\" label=\"支付状态\" valuePropName=\"checked\"  >\r\n            <Switch />\r\n          </Form.Item>\r\n        </Form>\r\n    )\r\n\r\n    return (raw, onSubmit)=>{\r\n        form.setFieldsValue(raw);\r\n        modal.confirm({\r\n            icon: true,\r\n            okText: '提交',\r\n            onOk: closeForm => {form.validateFields().then(values=>onSubmit({...raw, ...values, date: dayjs(values.date).unix()*1000}, closeForm)).catch(console.info)},\r\n            content\r\n        });\r\n    }\r\n\r\n}","import { CheckCircleOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { Button, Divider, Popconfirm, Space, Table } from \"antd\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { productStore } from \"../../../store/productStore\";\r\nimport dayjs from 'dayjs';\r\nimport usePaymentPanel from '../../../comp/payment';\r\n\r\nfunction ProductDetail () {\r\n\r\n    const {id: productId, payments, sampleOrder, custOrders, materials} = productStore.product;\r\n\r\n    // payment \r\n    const paymentPanel = usePaymentPanel({title:'记录编辑'});\r\n    const {newPayment, updatePayment, deletePayment} = productStore;\r\n\r\n    const submit2NewPayment = () => {\r\n        newPayment(productId, {})\r\n    }\r\n    const submitPayment = (values, callbk) => {\r\n        updatePayment(productId, values, callbk)\r\n    }\r\n\r\n    const paymentColumns = [\r\n        {\r\n            title: '类别',\r\n            dataIndex: 'title',\r\n            key: 'title',\r\n            width: '3.5em',\r\n            render: (_, {title}) => {\r\n                switch (title) {\r\n                    case '1':\r\n                        return '定金'\r\n                    case '2':\r\n                        return '期金'\r\n                    case '3':\r\n                        return '尾款'\r\n                    default:\r\n                        return '其他'\r\n                }\r\n            }\r\n        },{\r\n            title: '支付日期',\r\n            dataIndex: 'date',\r\n            key: 'date',\r\n            render: (_, {date}) => (\r\n                dayjs(date).format(\"YYYY.MM.DD\") ? dayjs(date).format(\"YYYY.MM.DD\") : \"-\"\r\n            )\r\n\r\n        },{\r\n            title: '支付状态',\r\n            dataIndex: 'paid',\r\n            key: 'paid',\r\n            render: (_, {paid}) => (\r\n                paid ? <><CheckCircleOutlined style={{color: 'green'}} />{'已支付'}</> : <>-</> \r\n            )\r\n        },{\r\n            title: '支付金额',\r\n            dataIndex: 'amount',\r\n            key: 'amount'\r\n        },{\r\n            title: '操作',\r\n            key: 'action',\r\n            render: (_, record) => (\r\n                <Space>\r\n                    <Popconfirm\r\n                        placement=\"topRight\"\r\n                        title=\"产品移除\"\r\n                        // description={`${item.style}-${item.model}`}\r\n                        onConfirm={()=>deletePayment(productId, record.id)}\r\n                        okText=\"Yes\"\r\n                        cancelText=\"No\"\r\n                    >\r\n                        <DeleteOutlined  style={{color: 'red'}}/>\r\n                    </Popconfirm>\r\n                     \r\n                    <a onClick={()=>paymentPanel({...record, date: dayjs(record.date)}, submitPayment)}>编辑</a>\r\n                </Space>\r\n            )\r\n        },\r\n    ]\r\n    return (\r\n        <>\r\n\r\n            <Divider orientation='left'>付款记录</Divider>\r\n            <Button onClick={submit2NewPayment}>new Payment</Button>\r\n            <Table pagination={{position:[]}}  showHeader={true} columns={paymentColumns} dataSource={payments.map(value=> ({key: `paymentKey_${value.id}`, ...value }) )} />\r\n\r\n\r\n            <Divider orientation='left'>规格数量</Divider>\r\n            <Table pagination={{position:[]}} showHeader={true} columns={paymentColumns} dataSource={payments.map(value=> ({key: `paymentKey_${value.id}`, ...value }) )} />\r\n            <Divider orientation='left'>物料 & 工厂</Divider>\r\n            <Table pagination={{position:[]}} showHeader={true} columns={paymentColumns} dataSource={payments.map(value=> ({key: `paymentKey_${value.id}`, ...value }) )} />\r\n\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default  observer (ProductDetail);\r\n","import { makeAutoObservable } from \"mobx\";\r\nimport http from \"../utils/http\";\r\n\r\nclass ProductStore{\r\n\r\n    filterTemplate = [\r\n        {key: 'pending', title: '洽谈中', value:0, color: '#3f8600'},\r\n        {key: 'studio', title: '样板中', value:0, color: '#f56a00'},\r\n        {key: 'factory', title: '投产中', value:0, color: '#f56a00'},\r\n        {key: 'paid', title: '待尾款', value:0, color: '#cf1322'},\r\n    ]\r\n    filter = 'pending'\r\n    product = {}\r\n    products = []\r\n    constructor(){\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n\r\n    // snap\r\n    selectd = (object) => {\r\n        this.product = {...object}\r\n    }\r\n\r\n\r\n    updateFilter = value => this.filter = value\r\n\r\n    get getFilterTemplate(){\r\n\r\n        this.filterTemplate.forEach(\r\n            value => {\r\n                value.value = this.products.filter(item => item.productStatus === value.key).length;\r\n            }\r\n        )\r\n\r\n        return this.filterTemplate;\r\n    }\r\n\r\n    new = () => {\r\n        http.post('product', {})\r\n        .then(res => {\r\n            this.products = [...this.products, res.data]\r\n        })\r\n        .catch(console.log);\r\n    }\r\n\r\n    index = () => {\r\n\r\n        http.get('product')\r\n        .then(res => {\r\n            this.products = [...res.data]\r\n            // message.info('success')\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n            // message.error(error?.response?.data?.message);\r\n        })\r\n    }\r\n\r\n\r\n    del = (id) => {\r\n        http.delete(`product/${id}`).then(\r\n            res => this.products.splice(this.products.findIndex(value=>value.id === id),1)\r\n        )\r\n    }\r\n\r\n    getByFilter = () => {\r\n\r\n        let listfilter = this.products.filter(item => item.productStatus === this.filter);\r\n        switch (this.filter) {\r\n            case 'pending':\r\n                return listfilter.sort((a,b)=> a.cdate - b.cdate);\r\n            case 'studio':\r\n                return listfilter.sort((a,b) => a.sampleOrder.manufactureDates - b.sampleOrder.manufactureDates)\r\n            case 'factory':\r\n                return listfilter.sort((a,b) => a.mdate - b.mdate)\r\n            \r\n            default:\r\n                return listfilter\r\n        }\r\n\r\n        \r\n    }\r\n    // Payment \r\n    newPayment = (productId, requestBody) => {\r\n        http.post(`product/${productId}/payment`, {...requestBody})\r\n        .then(res=>{\r\n            \r\n            for (const iterator of this.products) {\r\n                if(iterator.id === productId)\r\n                    iterator.payments.push({...res.data})\r\n            }\r\n\r\n          \r\n        })\r\n        .catch(console.error);\r\n    }\r\n\r\n    updatePayment = (productId, requestBody, callbk) => {\r\n        http.put(`product/${productId}/payment`, {...requestBody})\r\n        .then(res=>{\r\n            \r\n            const payment = res.data;\r\n            for (const iterator of this.products) {\r\n                if(iterator.id === productId){\r\n                    let index = iterator.payments.findIndex(value => value.id === payment.id);\r\n                    iterator.payments.splice(index, 1, {...payment})\r\n\r\n                }\r\n\r\n            }\r\n            //\r\n            callbk();\r\n        })\r\n        .catch(console.error);\r\n    }\r\n\r\n    deletePayment = (productId, paymentId) => {\r\n        http.delete(`product/${productId}/payment/${paymentId}`)\r\n        .then(res=>{\r\n\r\n            for (const iterator of this.products) {\r\n                if(iterator.id === productId){\r\n                    let index = iterator.payments.findIndex(value => value.id === paymentId);\r\n                    iterator.payments.splice(index, 1)\r\n                }\r\n            }\r\n           \r\n        })\r\n        .catch(console.error);\r\n    }\r\n\r\n    // payment\r\n\r\n\r\n}\r\n\r\nexport const productStore = new ProductStore()","import axios from \"axios\";\r\n\r\n\r\n\r\n\r\nconst http = axios.create({\r\n    baseURL: process.env.REACT_APP_BE_API,\r\n    timeout: 3000\r\n});\r\n\r\n\r\nhttp.interceptors.request.use(\r\n    config => {\r\n\r\n        console.info(config)\r\n        // append access token\r\n        if(localStorage.getItem('API_KEY') && config.url !== 'login')\r\n            config.headers.Authorization = `Bearer ${localStorage.getItem('API_KEY')}`\r\n\r\n        // todo\r\n        return config;\r\n    },\r\n    error => {\r\n  \r\n        return Promise.reject(error);\r\n    }\r\n)\r\n\r\nhttp.interceptors.response.use(\r\n    response => {\r\n   \r\n        return response;\r\n    },\r\n    error => {\r\n        console.info(\"start\")\r\n        console.info(error)\r\n        console.info(\"end\")\r\n     \r\n        return Promise.reject(error);\r\n    }\r\n)\r\n\r\nexport default http"],"names":["usePaymentPanel","_ref","title","modal","App","_Form$useForm","Form","form","_slicedToArray","content","_jsxs","size","preserve","children","_jsx","Divider","label","name","Select","options","value","rules","type","DatePicker","inputReadOnly","InputNumber","valuePropName","Switch","raw","onSubmit","setFieldsValue","confirm","icon","okText","onOk","closeForm","validateFields","then","values","_objectSpread","date","dayjs","unix","catch","console","info","observer","_productStore$product","productStore","productId","id","payments","paymentPanel","sampleOrder","custOrders","materials","newPayment","updatePayment","deletePayment","submitPayment","callbk","paymentColumns","dataIndex","key","width","render","_","_ref2","format","_ref3","paid","_Fragment","CheckCircleOutlined","style","color","record","Space","Popconfirm","placement","onConfirm","cancelText","DeleteOutlined","onClick","orientation","Button","Table","pagination","position","showHeader","columns","dataSource","map","concat","ProductStore","_this","_classCallCheck","filterTemplate","filter","product","products","selectd","object","updateFilter","new","http","res","_toConsumableArray","data","log","index","error","del","splice","findIndex","getByFilter","listfilter","item","productStatus","sort","a","b","cdate","manufactureDates","mdate","requestBody","_step","_iterator","_createForOfIteratorHelper","s","n","done","iterator","push","err","e","f","_step2","payment","_iterator2","paymentId","_step3","_iterator3","makeAutoObservable","this","_createClass","get","_this2","forEach","length","axios","baseURL","process","timeout","interceptors","request","use","config","localStorage","getItem","url","headers","Authorization","Promise","reject","response"],"sourceRoot":""}