"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[250],{65:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(1413),i=n(9439),a=n(6185),c=n(7846),o=n(7128),u=n(9555),l=n(8764),d=n(2706),s=n(1306),f=n(7892),m=n.n(f),h=n(184);function p(e){var t=e.title,n=a.Z.useApp().modal,f=c.Z.useForm(),p=(0,i.Z)(f,1)[0],y=(0,h.jsxs)(c.Z,{size:"middle",preserve:!1,form:p,children:[t&&(0,h.jsx)(o.Z,{children:t}),(0,h.jsx)(c.Z.Item,{label:"\u7c7b\u522b",name:"title",children:(0,h.jsx)(u.Z,{options:[{value:"1",label:"\u8ba2\u91d1"},{value:"2",label:"\u671f\u6b3e"},{value:"3",label:"\u5c3e\u6b3e"}]})}),(0,h.jsx)(c.Z.Item,{name:"date",label:"\u652f\u4ed8\u65e5\u671f",rules:[{type:"object"}],children:(0,h.jsx)(l.Z,{inputReadOnly:!0})}),(0,h.jsx)(c.Z.Item,{name:"amount",label:"\u652f\u4ed8\u91d1\u989d",children:(0,h.jsx)(d.Z,{})}),(0,h.jsx)(c.Z.Item,{name:"paid",label:"\u652f\u4ed8\u72b6\u6001",valuePropName:"checked",children:(0,h.jsx)(s.Z,{})})]});return function(e,t){p.setFieldsValue(e),n.confirm({icon:!0,okText:"\u63d0\u4ea4",onOk:function(n){p.validateFields().then((function(i){return t((0,r.Z)((0,r.Z)((0,r.Z)({},e),i),{},{date:1e3*m()(i.date).unix()}),n)})).catch(console.info)},content:y})}}},5844:function(e,t,n){n.r(t);var r=n(1413),i=n(8944),a=n(2622),c=n(3099),o=n(5820),u=n(7309),l=n(3971),d=n(5058),s=n(7257),f=n(1732),m=n(7892),h=n.n(m),p=n(65),y=n(184);t.default=(0,s.Pi)((function(){var e=f.n.product,t=e.id,n=e.payments,s=(e.sampleOrder,e.custOrders),m=(e.materials,(0,p.Z)({title:"\u8bb0\u5f55\u7f16\u8f91"})),Z=f.n.newPayment,x=f.n.updatePayment,j=f.n.deletePayment,k=function(){Z(t,{})},v=function(e,n){x(t,e,n)},g=[{title:"\u7c7b\u522b",dataIndex:"title",key:"title",width:"3.5em",render:function(e,t){switch(t.title){case"1":return"\u5b9a\u91d1";case"2":return"\u671f\u91d1";case"3":return"\u5c3e\u6b3e";default:return"\u5176\u4ed6"}}},{title:"\u652f\u4ed8\u65e5\u671f",dataIndex:"date",key:"date",render:function(e,t){var n=t.date;return h()(n).format("YYYY.MM.DD")?h()(n).format("YYYY.MM.DD"):"-"}},{title:"\u652f\u4ed8\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return t.paid?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.Z,{style:{color:"green"}}),"\u5df2\u652f\u4ed8"]}):(0,y.jsx)(y.Fragment,{children:"-"})}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount"},{title:"\u64cd\u4f5c",key:"action",render:function(e,n){return(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(o.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return j(t,n.id)},okText:"Yes",cancelText:"No",children:(0,y.jsx)(a.Z,{style:{color:"red"}})}),(0,y.jsx)("a",{onClick:function(){return m((0,r.Z)((0,r.Z)({},n),{},{date:h()(n.date)}),v)},children:"\u7f16\u8f91"})]})}}],w=[{title:"\u7801",dataIndex:"size",key:"size",width:".5em"},{title:"\u80f8\u56f4",dataIndex:"s1",key:"s1",width:"3.5em"},{title:"\u8170\u56f4",dataIndex:"s2",key:"s2",width:"3.5em"},{title:"\u8863\u957f",dataIndex:"s3",key:"s3",width:"3.5em"},{title:"\u9884\u5b9a",dataIndex:"preCount",key:"preCount",width:"3.5em"},{title:"\u51fa\u5382",dataIndex:"actCount",key:"actCount",width:"3.5em"},{title:"\u64cd\u4f5c",key:"action",render:function(e,n){return(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(o.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return j(t,n.id)},okText:"Yes",cancelText:"No",children:(0,y.jsx)(a.Z,{style:{color:"red"}})}),(0,y.jsx)("a",{onClick:function(){return m((0,r.Z)((0,r.Z)({},n),{},{date:h()(n.date)}),v)},children:"\u7f16\u8f91"})]})}}],C=[{key:"1",label:"\u89c4\u683c & \u6570\u91cf",children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.ZP,{onClick:k,children:"new Payment"}),(0,y.jsx)(l.Z,{pagination:{position:[]},showHeader:!0,columns:w,dataSource:s.map((function(e){return(0,r.Z)({key:"custOrders".concat(e.id)},e)})),summary:function(e){var t=0;return e.forEach((function(e){var n=e.preCount;e.actCount;t+=n})),(0,y.jsxs)(l.Z.Summary.Row,{children:[(0,y.jsx)(l.Z.Summary.Cell,{index:0,children:"\u603b"}),(0,y.jsx)(l.Z.Summary.Cell,{index:1,children:"-"}),(0,y.jsx)(l.Z.Summary.Cell,{index:2,children:"-"}),(0,y.jsx)(l.Z.Summary.Cell,{index:3,children:"-"}),(0,y.jsx)(l.Z.Summary.Cell,{index:4,children:t}),(0,y.jsx)(l.Z.Summary.Cell,{index:5,children:t})]})}})]})},{key:"2",label:"\u7269\u6599 & \u5de5\u5382",children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.ZP,{onClick:k,children:"new Payment"}),(0,y.jsx)(l.Z,{pagination:{position:[]},showHeader:!0,columns:g,dataSource:n.map((function(e){return(0,r.Z)({key:"paymentKey_".concat(e.id)},e)}))})]})},{key:"3",label:"\u4ed8\u6b3e\u8bb0\u5f55",children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.ZP,{onClick:k,children:"new Payment"}),(0,y.jsx)(l.Z,{pagination:{position:[]},showHeader:!0,columns:g,dataSource:n.map((function(e){return(0,r.Z)({key:"paymentKey_".concat(e.id)},e)}))})]})}];return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.Z,{defaultActiveKey:"1",items:C,onChange:function(e){console.log(e)}})})}))},1732:function(e,t,n){n.d(t,{n:function(){return d}});var r=n(7762),i=n(3433),a=n(1413),c=n(5671),o=n(3144),u=n(4098),l=n(129),d=new(function(){function e(){var t=this;(0,c.Z)(this,e),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.selectd=function(e){t.product=(0,a.Z)({},e)},this.updateFilter=function(e){return t.filter=e},this.new=function(){l.Z.post("product",{}).then((function(e){t.products=[].concat((0,i.Z)(t.products),[e.data])})).catch(console.log)},this.index=function(){l.Z.get("product").then((function(e){t.products=(0,i.Z)(e.data)})).catch((function(e){console.log(e)}))},this.del=function(e){l.Z.delete("product/".concat(e)).then((function(n){return t.products.splice(t.products.findIndex((function(t){return t.id===e})),1)}))},this.getByFilter=function(){var e=t.products.filter((function(e){return e.productStatus===t.filter}));switch(t.filter){case"pending":return e.sort((function(e,t){return e.cdate-t.cdate}));case"studio":return e.sort((function(e,t){return e.sampleOrder.manufactureDates-t.sampleOrder.manufactureDates}));case"factory":return e.sort((function(e,t){return e.mdate-t.mdate}));default:return e}},this.newPayment=function(e,n){l.Z.post("product/".concat(e,"/payment"),(0,a.Z)({},n)).then((function(n){var i,c=(0,r.Z)(t.products);try{for(c.s();!(i=c.n()).done;){var o=i.value;o.id===e&&o.payments.push((0,a.Z)({},n.data))}}catch(u){c.e(u)}finally{c.f()}})).catch(console.error)},this.updatePayment=function(e,n,i){l.Z.put("product/".concat(e,"/payment"),(0,a.Z)({},n)).then((function(n){var c,o=n.data,u=(0,r.Z)(t.products);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(l.id===e){var d=l.payments.findIndex((function(e){return e.id===o.id}));l.payments.splice(d,1,(0,a.Z)({},o))}}}catch(s){u.e(s)}finally{u.f()}i()})).catch(console.error)},this.deletePayment=function(e,n){l.Z.delete("product/".concat(e,"/payment/").concat(n)).then((function(i){var a,c=(0,r.Z)(t.products);try{for(c.s();!(a=c.n()).done;){var o=a.value;if(o.id===e){var u=o.payments.findIndex((function(e){return e.id===n}));o.payments.splice(u,1)}}}catch(l){c.e(l)}finally{c.f()}})).catch(console.error)},(0,u.ky)(this)}return(0,o.Z)(e,[{key:"getFilterTemplate",get:function(){var e=this;return this.filterTemplate.forEach((function(t){t.value=e.products.filter((function(e){return e.productStatus===t.key})).length})),this.filterTemplate}}]),e}())},129:function(e,t,n){var r=n(1243).Z.create({baseURL:"http://aruchi.top:1182",timeout:3e3});r.interceptors.request.use((function(e){return console.info(e),localStorage.getItem("API_KEY")&&"login"!==e.url&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("API_KEY"))),e}),(function(e){return Promise.reject(e)})),r.interceptors.response.use((function(e){return e}),(function(e){return console.info("start"),console.info(e),console.info("end"),Promise.reject(e)})),t.Z=r}}]);
//# sourceMappingURL=250.a9e8414c.chunk.js.map