"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[767],{1767:function(t,e,c){c.r(e);var n=c(9439),i=c(2791),r=c(1732),o=c(7257),s=c(7128),u=c(1046),a=c(6473),d=c(4078),l=c(9555),p=c(2706),f=c(8715),h=c(7174),Z=c(5273),m=c(184);e.default=(0,o.Pi)((function(){var t=r.n.statistic701Period,e=r.n.statistic701PeriodFilter,c=r.n.statistic701Producer,o=r.n.statistic701ProducerFilter,x=r.n.statistic701,g=r.n.get701Statistic,P=(0,i.useState)(7500),v=(0,n.Z)(P,2),y=v[0],j=v[1];(0,i.useEffect)((function(){g()}),[]);var k=function(){return x.filter((function(t){return t.period===e})).filter((function(t){return t.producer===o}))},F=function(){var t=0,e=0;return k().forEach((function(c){t+=c.cost,e+=c.count})),{cost:t,count:e}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.Z,{orientation:"left",children:"\u7edf\u8ba1"}),(0,m.jsxs)(u.Z,{direction:"vertical",style:{display:"flex"},children:[(0,m.jsx)(a.Z,{children:(0,m.jsxs)(u.Z,{children:[(0,m.jsx)(d.Z.Text,{children:"\u677f\u671f"}),(0,m.jsx)(l.Z,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100px"},value:e,onChange:function(t){return r.n.statistic701PeriodFilter=t},options:null===t||void 0===t?void 0:t.map((function(t){return{value:t,label:t}}))}),(0,m.jsx)(d.Z.Text,{children:"\u677f\u5e08"}),(0,m.jsx)(l.Z,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100px"},value:o,onChange:function(t){return r.n.statistic701ProducerFilter=t},options:null===c||void 0===c?void 0:c.map((function(t){return{value:t,label:t}}))})]})}),(0,m.jsx)(a.Z,{children:(0,m.jsxs)(u.Z,{children:[(0,m.jsx)(d.Z.Text,{children:"\u85aa\u8d44"}),(0,m.jsx)(p.Z,{style:{width:"100px"},value:y,onChange:j})]})}),(0,m.jsx)(a.Z,{title:(0,m.jsxs)(u.Z,{children:[e," ",o," ",F().cost,"\u65f6 ",F().count,"\u4ef6"]}),children:(0,m.jsx)(f.Z,{dataSource:k(),renderItem:function(t){return(0,m.jsx)(f.Z.Item,{children:(0,m.jsxs)(h.Z,{column:2,children:[(0,m.jsxs)(h.Z.Item,{label:t.agent,children:[Math.round(t.cost/F().cost*y*100)/100," \u5143"]}),(0,m.jsx)(h.Z.Item,{label:"".concat(t.cost,"\u65f6 / ").concat(t.count,"\u4ef6"),children:(0,m.jsx)(Z.Z,{strokeColor:{"0%":"#006564","100%":"#87d068"},percent:Math.round(t.cost/F().cost*1e4)/100})})]})})}})})]})]})}))},1732:function(t,e,c){c.d(e,{n:function(){return d}});var n=c(1413),i=c(3433),r=c(5671),o=c(3144),s=c(4098),u=c(3760),a=c(383),d=new(function(){function t(){var e=this;(0,r.Z)(this,t),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.studio701Products=[],this.statistic701=[],this.statistic701Period=[],this.statistic701PeriodFilter="",this.statistic701Producer=[],this.statistic701ProducerFilter="",this.paymentDetail={},this.get701Statistic=function(){u.Z.get("/statistic/studio/701").then((function(t){e.statistic701=(0,i.Z)(t.data),e.statistic701Period=(0,i.Z)(new Set(e.statistic701.map((function(t){return t.period})))),e.statistic701Producer=(0,i.Z)(new Set(e.statistic701.map((function(t){return t.producer})))),e.statistic701PeriodFilter=e.statistic701PeriodFilter||e.statistic701Period.at(-1),e.statistic701ProducerFilter=e.statistic701ProducerFilter||e.statistic701Producer.at(-1),console.log(e.statistic701Period),console.log(e.statistic701Producer)})).catch(console.log)},this.get701Products=function(){u.Z.get("product/701").then((function(t){e.studio701Products=(0,i.Z)(t.data)})).catch(console.log)},this.setPaymentDetail=function(t){e.paymentDetail=(0,n.Z)({},t)},this.selectd=function(t){e.product=(0,n.Z)({},t)},this.fallbackStatus=function(t){u.Z.get("product/".concat(t,"/fallbackStatus")).then((function(c){e.products=[].concat((0,i.Z)(e.products.filter((function(e){return e.id!==t}))),[c.data])})).catch(console.log)},this.updateFilter=function(t){return e.filter=t},this.new=function(){u.Z.post("product",{}).then((function(t){e.products=[].concat((0,i.Z)(e.products),[t.data])})).catch(console.log)},this.updateProduct=function(t){u.Z.put("product",t).then((function(t){e.products=[].concat((0,i.Z)(e.products.filter((function(e){return e.id!==t.data.id}))),[t.data]),e.product=(0,n.Z)({},t.data)})).catch(console.log)},this.index=function(){u.Z.get("product").then((function(t){e.products=(0,i.Z)(t.data)})).catch((function(t){console.log(t)}))},this.del=function(t){u.Z.delete("product/".concat(t)).then((function(c){return e.products.splice(e.products.findIndex((function(e){return e.id===t})),1)})).catch(console.log)},this.getByFilter=function(){var t=e.products.filter((function(t){return t.productStatus===e.filter}));switch(e.filter){case"pending":case"studio":case"factory":return t.sort((function(t,e){return t.cdate-e.cdate}));default:return t}},this.updateStudio=function(t){console.log(t),u.Z.put("product/".concat(e.product.id,"/studio"),{id:t}).then((function(t){e.product=(0,n.Z)((0,n.Z)({},e.product),{},{sampleOrder:t.data}),e.products.splice(e.products.findIndex((function(t){return t.id===e.product.id})),1,e.product)})).catch(console.log)},this.updateStudioDetail=function(t,c){u.Z.put("product/".concat(t,"/sample"),c).then((function(t){return e.get701Products()})).catch(console.log)},this.newPayment=function(t,c){u.Z.post("product/".concat(t,"/payment"),(0,n.Z)({},c)).then((function(t){e.product.payments.push((0,n.Z)({},t.data))})).catch(console.error)},this.updatePayment=function(t,c,i){u.Z.put("product/".concat(t,"/payment"),(0,n.Z)({},c)).then((function(t){var c=t.data,r=e.product.payments.findIndex((function(t){return t.id===c.id}));e.product.payments.splice(r,1,(0,n.Z)({},c)),i()})).catch(console.error)},this.deletePayment=function(t,c){u.Z.delete("product/".concat(t,"/payment/").concat(c)).then((function(t){var n=e.product.payments.findIndex((function(t){return t.id===c}));e.product.payments.splice(n,1)})).catch(console.error)},this.newCustOrder=function(t,c){u.Z.post("product/".concat(t,"/custOrder"),(0,n.Z)({},c)).then((function(t){e.product.custOrders.push((0,n.Z)({},t.data))})).catch(console.error)},this.updateCustOrder=function(t,c,i){u.Z.put("product/".concat(t,"/custOrder"),(0,n.Z)({},c)).then((function(t){var c=t.data,r=e.product.custOrders.findIndex((function(t){return t.id===c.id}));e.product.custOrders.splice(r,1,(0,n.Z)({},c)),i()})).catch(console.error)},this.deleteCustOrder=function(t,c){u.Z.delete("product/".concat(t,"/custOrder/").concat(c)).then((function(t){var n=e.product.custOrders.findIndex((function(t){return t.id===c}));e.product.custOrders.splice(n,1)})).catch(console.error)},this.newMaterials=function(t,c){u.Z.post("product/".concat(t,"/material"),(0,n.Z)({},c)).then((function(t){e.product.materials.push((0,n.Z)({},t.data))})).catch(console.error)},this.updateMaterials=function(t,c,i){u.Z.put("product/".concat(t,"/material"),(0,n.Z)({},c)).then((function(t){var c=t.data,r=e.product.materials.findIndex((function(t){return t.id===c.id}));e.product.materials.splice(r,1,(0,n.Z)({},c)),i()})).catch(console.error)},this.deleteMaterials=function(t,c){u.Z.delete("product/".concat(t,"/material/").concat(c)).then((function(t){var n=e.product.materials.findIndex((function(t){return t.id===c}));e.product.materials.splice(n,1)})).catch(console.error)},(0,s.ky)(this),a.H.isLogin&&this.index()}return(0,o.Z)(t,[{key:"getFilterTemplate",get:function(){var t=this;return this.filterTemplate.forEach((function(e){e.value=t.products.filter((function(t){return t.productStatus===e.key})).length})),this.filterTemplate}}]),t}())}}]);
//# sourceMappingURL=767.598e0670.chunk.js.map