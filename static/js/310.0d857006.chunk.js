"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[310],{65:function(t,e,n){n.d(e,{Z:function(){return g}});var c=n(1413),o=n(9439),i=n(5152),r=n(7846),a=n(7128),s=n(5),u=n(1046),d=n(5882),l=n(2706),A=n(1306),h=n(7892),p=n.n(h),f=n(184);function g(t){var e=t.title,n=i.Z.useApp().modal,h=r.Z.useForm(),g=(0,o.Z)(h,1)[0],E=(0,f.jsxs)(r.Z,{size:"middle",preserve:!1,form:g,children:[e&&(0,f.jsx)(a.Z,{children:e}),(0,f.jsx)(r.Z.Item,{label:"\u7c7b\u522b",name:"title",children:(0,f.jsx)(s.Z,{})}),(0,f.jsxs)(u.Z,{children:[(0,f.jsx)(r.Z.Item,{name:"date",label:"\u652f\u4ed8\u65e5\u671f",rules:[{type:"object"}],children:(0,f.jsx)(d.Z,{inputReadOnly:!0})}),(0,f.jsx)(r.Z.Item,{name:"amount",label:"\u652f\u4ed8\u91d1\u989d",children:(0,f.jsx)(l.Z,{})})]}),(0,f.jsxs)(u.Z,{children:[(0,f.jsx)(r.Z.Item,{name:"batch",label:"\u5bf9\u5e94\u6279\u6b21",children:(0,f.jsx)(l.Z,{})}),(0,f.jsx)(r.Z.Item,{name:"paid",label:"\u652f\u4ed8\u72b6\u6001",valuePropName:"checked",children:(0,f.jsx)(A.Z,{})})]})]});return function(t,e){g.setFieldsValue(t),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){g.validateFields().then((function(o){return e((0,c.Z)((0,c.Z)((0,c.Z)({},t),o),{},{date:1e3*p()(o.date).unix()}),n)})).catch(console.info)},content:E})}}},8310:function(t,e,n){n.r(e),n.d(e,{default:function(){return J}});for(var c=n(7762),o=n(9439),i=n(2622),r=n(4078),a=n(5152),s=n(5820),u=n(2339),d=n(1429),l=n(9555),A=n(7309),h=n(7128),p=n(4248),f=n(6473),g=n(8715),E=n(2242),Q=n(2735),Z=(n(3742),n(6280)),m=n(383),B=n(7257),I=n(1732),y=n(7892),j=n.n(y),C=n(2791),k=n(184),x=[],v=0;v<100;v++)x.push({key:v.toString(),name:"Edward ".concat(v),age:32,address:"London Park no. ".concat(v)});var N=n(65),S=n(7689);r.Z.Title;var J=(0,B.Pi)((function(){(0,C.useEffect)((function(){m.H.isLogin&&I.n.index()}),[]);var t=(0,S.s0)(),e=(0,N.Z)({title:"\u8d26\u5355"}),n=a.Z.useApp().message,B=(0,Z.Z)(),y=(0,Q.Z)(),x=(0,o.Z)(y,2),v=(x[0],x[1]),J=function(t,e){m.H.login(t,(function(t){v(t),e()}),n)},P=function(t){var e=[],n=(0,k.jsxs)(s.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",description:"".concat(t.style,"-").concat(t.model),onConfirm:function(){return I.n.del(t.id)},children:[(0,k.jsx)(i.Z,{style:{color:"red"}})," \u79fb\u9664"]}),o=(0,k.jsxs)(u.Z,{color:"success",children:[t.sampleOrder.studioName," ",t.sampleOrder.producerName?t.sampleOrder.producerName+" "+t.sampleOrder.cost+" \u5c0f\u65f6":"\u6392\u961f\u4e2d"]});switch(t.productStatus){case"pending":e.push(n);break;case"studio":e.push(o);break;case"factory":var r,a=0,d=(0,c.Z)(t.materials);try{for(d.s();!(r=d.n()).done;){a+=r.value.amount}}catch(A){d.e(A)}finally{d.f()}var l=(0,k.jsxs)(u.Z,{color:"error",children:[a," \u5143"]});e.push(l)}return e},b=function(t){var e=j()().diff(j()(t),"days");switch(!0){case 0===e:return(0,k.jsx)(u.Z,{color:"success",children:"\u4eca\u5929"});case e<3:return(0,k.jsxs)(u.Z,{color:"warning",children:[e," \u5929\u524d"]});default:return(0,k.jsxs)(k.Fragment,{children:[" ",(0,k.jsx)(u.Z,{color:"error",children:"\u8bf7\u8ddf\u8fdb"})," ",j()(t).format("YYYY.MM.DD")," "]})}};return(0,k.jsxs)("div",{className:"about",children:[(0,k.jsx)(l.Z,{defaultValue:"jack",options:[{value:"jack",label:"Jack"},{value:"solar",label:"Solar"},{value:"boro",label:"Boro"}]}),m.H.user.fullname,(0,k.jsx)(A.ZP,{onClick:function(){return B(J)},children:"called"}),(0,k.jsx)(A.ZP,{onClick:function(){return I.n.index()},children:"products"}),(0,k.jsx)(A.ZP,{onClick:function(){return e((function(t,e){return console.log(t)}))},children:"payment"}),(0,k.jsx)(h.Z,{orientation:"left",children:"\u6982\u8981"}),(0,k.jsx)(p.Z,{default:I.n.filter,onChange:I.n.updateFilter,block:!0,options:I.n.getFilterTemplate.map((function(t){return{label:(0,k.jsx)(d.Z,{title:t.title,value:t.value,valueStyle:{color:t.color}}),value:t.key}}))}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(g.Z,{size:"middle",itemLayout:"horizontal",pagination:{pageSize:5,simple:!0,position:"bottom",align:"end"},dataSource:I.n.getByFilter(),renderItem:function(e){return(0,k.jsx)(g.Z.Item,{actions:P(e),children:(0,k.jsx)(g.Z.Item.Meta,{onClick:function(){return t("/product/".concat(e.id))},avatar:(0,k.jsx)(E.Z,{width:30,height:40,src:"error",fallback:"data:image/png;base64,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"}),title:(0,k.jsxs)(k.Fragment,{children:[e.style?e.style:"-"," ",e.model," "]}),description:(0,k.jsx)(r.Z.Text,{type:"secondary",ellipsis:!0,children:b(e.cdate)})})})}})}),(0,k.jsx)("br",{}),(0,k.jsx)(A.ZP,{onClick:function(){return I.n.new()},size:"large",type:"primary",block:!0,children:" \u5ba2\u5355\u6dfb\u52a0 "})]})}))},1732:function(t,e,n){n.d(e,{n:function(){return d}});var c=n(1413),o=n(3433),i=n(5671),r=n(3144),a=n(4098),s=n(3760),u=n(383),d=new(function(){function t(){var e=this;(0,i.Z)(this,t),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.studio701Products=[],this.statistic701=[],this.statistic701Period=[],this.statistic701PeriodFilter="",this.statistic701Producer=[],this.statistic701ProducerFilter="",this.paymentDetail={},this.get701Statistic=function(){s.Z.get("/statistic/studio/701").then((function(t){e.statistic701=(0,o.Z)(t.data),e.statistic701Period=(0,o.Z)(new Set(e.statistic701.map((function(t){return t.period})))),e.statistic701Producer=(0,o.Z)(new Set(e.statistic701.map((function(t){return t.producer})))),e.statistic701PeriodFilter=e.statistic701PeriodFilter||e.statistic701Period.at(-1),e.statistic701ProducerFilter=e.statistic701ProducerFilter||e.statistic701Producer.at(-1),console.log(e.statistic701Period),console.log(e.statistic701Producer)})).catch(console.log)},this.get701Products=function(){s.Z.get("product/701").then((function(t){e.studio701Products=(0,o.Z)(t.data)})).catch(console.log)},this.setPaymentDetail=function(t){e.paymentDetail=(0,c.Z)({},t)},this.selectd=function(t){e.product=(0,c.Z)({},t)},this.fallbackStatus=function(t){s.Z.get("product/".concat(t,"/fallbackStatus")).then((function(n){e.products=[].concat((0,o.Z)(e.products.filter((function(e){return e.id!==t}))),[n.data])})).catch(console.log)},this.updateFilter=function(t){return e.filter=t},this.new=function(){s.Z.post("product",{}).then((function(t){e.products=[].concat((0,o.Z)(e.products),[t.data])})).catch(console.log)},this.updateProduct=function(t){s.Z.put("product",t).then((function(t){e.products=[].concat((0,o.Z)(e.products.filter((function(e){return e.id!==t.data.id}))),[t.data]),e.product=(0,c.Z)({},t.data)})).catch(console.log)},this.index=function(){s.Z.get("product").then((function(t){e.products=(0,o.Z)(t.data)})).catch((function(t){console.log(t)}))},this.del=function(t){s.Z.delete("product/".concat(t)).then((function(n){return e.products.splice(e.products.findIndex((function(e){return e.id===t})),1)})).catch(console.log)},this.getByFilter=function(){var t=e.products.filter((function(t){return t.productStatus===e.filter}));switch(e.filter){case"pending":case"studio":case"factory":return t.sort((function(t,e){return t.cdate-e.cdate}));default:return t}},this.updateStudio=function(t){console.log(t),s.Z.put("product/".concat(e.product.id,"/studio"),{id:t}).then((function(t){e.product=(0,c.Z)((0,c.Z)({},e.product),{},{sampleOrder:t.data}),e.products.splice(e.products.findIndex((function(t){return t.id===e.product.id})),1,e.product)})).catch(console.log)},this.updateStudioDetail=function(t,n){s.Z.put("product/".concat(t,"/sample"),n).then((function(t){return e.get701Products()})).catch(console.log)},this.newPayment=function(t,n){s.Z.post("product/".concat(t,"/payment"),(0,c.Z)({},n)).then((function(t){e.product.payments.push((0,c.Z)({},t.data))})).catch(console.error)},this.updatePayment=function(t,n,o){s.Z.put("product/".concat(t,"/payment"),(0,c.Z)({},n)).then((function(t){var n=t.data,i=e.product.payments.findIndex((function(t){return t.id===n.id}));e.product.payments.splice(i,1,(0,c.Z)({},n)),o()})).catch(console.error)},this.deletePayment=function(t,n){s.Z.delete("product/".concat(t,"/payment/").concat(n)).then((function(t){var c=e.product.payments.findIndex((function(t){return t.id===n}));e.product.payments.splice(c,1)})).catch(console.error)},this.newCustOrder=function(t,n){s.Z.post("product/".concat(t,"/custOrder"),(0,c.Z)({},n)).then((function(t){e.product.custOrders.push((0,c.Z)({},t.data))})).catch(console.error)},this.updateCustOrder=function(t,n,o){s.Z.put("product/".concat(t,"/custOrder"),(0,c.Z)({},n)).then((function(t){var n=t.data,i=e.product.custOrders.findIndex((function(t){return t.id===n.id}));e.product.custOrders.splice(i,1,(0,c.Z)({},n)),o()})).catch(console.error)},this.deleteCustOrder=function(t,n){s.Z.delete("product/".concat(t,"/custOrder/").concat(n)).then((function(t){var c=e.product.custOrders.findIndex((function(t){return t.id===n}));e.product.custOrders.splice(c,1)})).catch(console.error)},this.newMaterials=function(t,n){s.Z.post("product/".concat(t,"/material"),(0,c.Z)({},n)).then((function(t){e.product.materials.push((0,c.Z)({},t.data))})).catch(console.error)},this.updateMaterials=function(t,n,o){s.Z.put("product/".concat(t,"/material"),(0,c.Z)({},n)).then((function(t){var n=t.data,i=e.product.materials.findIndex((function(t){return t.id===n.id}));e.product.materials.splice(i,1,(0,c.Z)({},n)),o()})).catch(console.error)},this.deleteMaterials=function(t,n){s.Z.delete("product/".concat(t,"/material/").concat(n)).then((function(t){var c=e.product.materials.findIndex((function(t){return t.id===n}));e.product.materials.splice(c,1)})).catch(console.error)},(0,a.ky)(this),u.H.isLogin&&this.index()}return(0,r.Z)(t,[{key:"getFilterTemplate",get:function(){var t=this;return this.filterTemplate.forEach((function(e){e.value=t.products.filter((function(t){return t.productStatus===e.key})).length})),this.filterTemplate}}]),t}())}}]);
//# sourceMappingURL=310.0d857006.chunk.js.map