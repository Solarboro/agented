"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[850],{65:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(1413),i=n(9439),a=n(6061),o=n(7846),c=n(7128),l=n(9555),d=n(8764),u=n(2706),s=n(1306),A=n(7892),f=n.n(A),h=n(184);function m(e){var t=e.title,n=a.Z.useApp().modal,A=o.Z.useForm(),m=(0,i.Z)(A,1)[0],Z=(0,h.jsxs)(o.Z,{size:"middle",preserve:!1,form:m,children:[t&&(0,h.jsx)(c.Z,{children:t}),(0,h.jsx)(o.Z.Item,{label:"\u7c7b\u522b",name:"title",children:(0,h.jsx)(l.Z,{options:[{value:"1",label:"\u8ba2\u91d1"},{value:"2",label:"\u671f\u6b3e"},{value:"3",label:"\u5c3e\u6b3e"}]})}),(0,h.jsx)(o.Z.Item,{name:"date",label:"\u652f\u4ed8\u65e5\u671f",rules:[{type:"object"}],children:(0,h.jsx)(d.Z,{inputReadOnly:!0})}),(0,h.jsx)(o.Z.Item,{name:"amount",label:"\u652f\u4ed8\u91d1\u989d",children:(0,h.jsx)(u.Z,{})}),(0,h.jsx)(o.Z.Item,{name:"paid",label:"\u652f\u4ed8\u72b6\u6001",valuePropName:"checked",children:(0,h.jsx)(s.Z,{})})]});return function(e,t){m.setFieldsValue(e),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){m.validateFields().then((function(i){return t((0,r.Z)((0,r.Z)((0,r.Z)({},e),i),{},{date:1e3*f()(i.date).unix()}),n)})).catch(console.info)},content:Z})}}},3850:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(1413),i=n(9439),a=n(8944),o=n(2622),c=n(446),l=n(5968),d=n(9331),u=n(2351),s=n(9286),A=n(3099),f=n(5820),h=n(3971),m=n(7128),Z=n(2242),p=n(7174),x=n(5485),g=n(9555),y=n(6452),E=n(7309),j=n(3640),Q=n(7257),v=n(1732),C=n(7892),I=n.n(C),k=n(65),B=n(7689),b=n(2791),S=n(6061),N=n(7846),w=n(9389),J=n(2706),R=n(184);var Y=n(1306);var K=(0,Q.Pi)((function(){var e,t,n,Q,C,K,F,T,z=(0,B.UO)().productStatus,M=(0,B.s0)(),O=v.n.product,P=v.n.updateProduct,U=v.n.updateStudio;(0,b.useEffect)((function(){O.id||M("/product")}),[O]);var D=function(){return"factory"===z?2:1},H=(0,b.useState)(D()),L=(0,i.Z)(H,2),G=L[0],q=L[1],X=(0,k.Z)({title:"\u4ed8\u6b3e\u8bb0\u5f55"}),W=v.n.newPayment,V=v.n.updatePayment,$=v.n.deletePayment,_=function(e,t){V(v.n.product.id,e,t)},ee=[{title:"\u7c7b\u522b",dataIndex:"title",key:"title",width:"3.5em",render:function(e,t){switch(t.title){case"1":return"\u5b9a\u91d1";case"2":return"\u671f\u91d1";case"3":return"\u5c3e\u6b3e";default:return"\u5176\u4ed6"}}},{title:"\u652f\u4ed8\u65e5\u671f",dataIndex:"date",key:"date",render:function(e,t){var n=t.date;return I()(n).format("YYYY.MM.DD")?I()(n).format("YYYY.MM.DD"):"-"}},{title:"\u652f\u4ed8\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return t.paid?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(a.Z,{style:{color:"green"}}),"\u5df2\u652f\u4ed8"]}):(0,R.jsx)(R.Fragment,{children:"-"})}},{title:"\u652f\u4ed8\u91d1\u989d",dataIndex:"amount",key:"amount"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,R.jsx)(A.Z,{children:(0,R.jsx)(f.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return $(v.n.product.id,t.id)},okText:"Yes",cancelText:"No",children:(0,R.jsx)(o.Z,{style:{color:"red"}})})})}}],te=function(e){var t=e.title,n=S.Z.useApp().modal,a=N.Z.useForm(),o=(0,i.Z)(a,1)[0],c=(0,R.jsxs)(N.Z,{layout:"horizontal",wrapperCol:{span:14},size:"middle",preserve:!1,form:o,children:[t&&(0,R.jsx)(m.Z,{children:t}),(0,R.jsx)(N.Z.Item,{name:"size",label:"\u5c3a\u7801",children:(0,R.jsx)(w.Z,{})}),(0,R.jsxs)(A.Z,{children:[(0,R.jsx)(N.Z.Item,{name:"preCount",label:"\u9884\u5b9a\u4ef6\u6570",children:(0,R.jsx)(J.Z,{})}),(0,R.jsx)(N.Z.Item,{name:"tolerance",label:"\u6d6e\u52a8\u4ef6\u6570",children:(0,R.jsx)(J.Z,{})})]}),(0,R.jsxs)(A.Z.Compact,{children:[(0,R.jsx)(N.Z.Item,{name:"s1",label:"\u80f8\u56f4",children:(0,R.jsx)(J.Z,{})}),(0,R.jsx)(N.Z.Item,{name:"s2",label:"\u8170\u56f4",children:(0,R.jsx)(J.Z,{})}),(0,R.jsx)(N.Z.Item,{name:"s3",label:"\u8863\u957f",children:(0,R.jsx)(J.Z,{})})]})]});return function(e,t){o.setFieldsValue(e),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){o.validateFields().then((function(i){return t((0,r.Z)((0,r.Z)((0,r.Z)({},e),i),{},{date:1e3*I()(i.date).unix()}),n)})).catch(console.info)},content:c})}}({title:"\u89c4\u683c & \u6570\u91cf"}),ne=v.n.newCustOrder,re=v.n.updateCustOrder,ie=v.n.deleteCustOrder,ae=function(e,t){re(v.n.product.id,e,t)},oe=[{title:"\u5c3a\u7801",dataIndex:"size",key:"size",width:"3.5em"},{title:"\u80f8\u56f4",dataIndex:"s1",key:"s1",width:"3.5em"},{title:"\u8170\u56f4",dataIndex:"s2",key:"s2",width:"3.5em"},{title:"\u8863\u957f",dataIndex:"s3",key:"s3",width:"3.5em"},{title:"\u9884\u5b9a",dataIndex:"preCount",key:"preCount",width:"3.5em"},{title:"\u51fa\u5382",dataIndex:"actCount",key:"actCount",width:"3.5em"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,R.jsx)(A.Z,{children:(0,R.jsx)(f.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return ie(v.n.product.id,t.id)},okText:"Yes",cancelText:"No",children:(0,R.jsx)(o.Z,{style:{color:"red"}})})})}}],ce=function(e){var t=e.title,n=S.Z.useApp().modal,a=N.Z.useForm(),o=(0,i.Z)(a,1)[0],c=(0,R.jsxs)(N.Z,{layout:"horizontal",wrapperCol:{span:14},size:"middle",preserve:!1,form:o,children:[t&&(0,R.jsx)(m.Z,{children:t}),(0,R.jsxs)(A.Z,{children:[(0,R.jsx)(N.Z.Item,{name:"label",label:"\u7c7b\u522b",children:(0,R.jsx)(w.Z,{})}),(0,R.jsx)(N.Z.Item,{name:"specification",label:"\u89c4\u683c",children:(0,R.jsx)(w.Z,{})})]}),(0,R.jsxs)(A.Z,{children:[(0,R.jsx)(N.Z.Item,{name:"price",label:"\u5355\u4ef7",children:(0,R.jsx)(J.Z,{})}),(0,R.jsx)(N.Z.Item,{name:"count",label:"\u6570\u91cf",children:(0,R.jsx)(J.Z,{})})]}),(0,R.jsx)(N.Z.Item,{name:"factory",label:"\u5de5\u5382",valuePropName:"checked",children:(0,R.jsx)(Y.Z,{})})]});return function(e,t){o.setFieldsValue(e),n.confirm({icon:!0,okText:"\u66f4\u65b0",onOk:function(n){o.validateFields().then((function(i){return t((0,r.Z)((0,r.Z)((0,r.Z)({},e),i),{},{date:1e3*I()(i.date).unix()}),n)})).catch(console.info)},content:c})}}({title:"\u7269\u6599 & \u5de5\u5382"}),le=v.n.newMaterials,de=v.n.updateMaterials,ue=v.n.deleteMaterials,se=function(e,t){de(v.n.product.id,e,t)},Ae=[{title:"\u7269\u6599\u540d",dataIndex:"label",key:"label"},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification"},{title:"\u5355\u4ef7",dataIndex:"price",key:"price"},{title:"\u6570\u91cf",dataIndex:"count",key:"count"},{title:"\u603b\u4ef7",dataIndex:"amount",key:"amount"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,R.jsx)(A.Z,{children:(0,R.jsx)(f.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",onConfirm:function(){return ue(v.n.product.id,t.id)},okText:"Yes",cancelText:"No",children:(0,R.jsx)(o.Z,{style:{color:"red"}})})})}}],fe=[{key:1,label:"\u89c4\u683c & \u6570\u91cf",children:(0,R.jsx)(h.Z,{pagination:{position:[]},showHeader:!0,columns:oe,dataSource:null===(e=v.n.product)||void 0===e||null===(t=e.custOrders)||void 0===t?void 0:t.map((function(e){return(0,r.Z)({key:"custOrders".concat(e.id)},e)})),summary:function(e){var t=0,n=0;return e.forEach((function(e){var r=e.preCount,i=e.actCount;t+=r,n+=i})),(0,R.jsxs)(h.Z.Summary.Row,{children:[(0,R.jsx)(h.Z.Summary.Cell,{index:0}),(0,R.jsx)(h.Z.Summary.Cell,{index:1}),(0,R.jsx)(h.Z.Summary.Cell,{index:2}),(0,R.jsx)(h.Z.Summary.Cell,{index:3}),(0,R.jsx)(h.Z.Summary.Cell,{index:4,children:t>0?t:""}),(0,R.jsx)(h.Z.Summary.Cell,{index:5,children:n>0?n:""})]})},onRow:function(e){return console.log("onclicek to here"),{onDoubleClick:function(t){return te((0,r.Z)((0,r.Z)({},e),{},{date:I()(e.date)}),ae)}}}})},{key:2,label:"\u7269\u6599 & \u5de5\u5382",children:(0,R.jsx)(h.Z,{pagination:{position:[]},showHeader:!0,columns:Ae,dataSource:null===(n=v.n.product)||void 0===n||null===(Q=n.materials)||void 0===Q?void 0:Q.map((function(e){return(0,r.Z)({key:"materials".concat(e.id)},e)})),summary:function(e){var t=0;return e.forEach((function(e){var n=e.amount;t+=n})),(0,R.jsxs)(h.Z.Summary.Row,{children:[(0,R.jsx)(h.Z.Summary.Cell,{index:0}),(0,R.jsx)(h.Z.Summary.Cell,{index:1}),(0,R.jsx)(h.Z.Summary.Cell,{index:2}),(0,R.jsx)(h.Z.Summary.Cell,{index:3}),(0,R.jsx)(h.Z.Summary.Cell,{index:4,children:t>0?t:""})]})},onRow:function(e){return{onDoubleClick:function(t){return ce((0,r.Z)((0,r.Z)({},e),{},{date:I()(e.date)}),se)}}}})},{key:3,label:"\u4ed8\u6b3e\u8bb0\u5f55",children:(0,R.jsx)(h.Z,{pagination:{position:[]},showHeader:!0,columns:ee,dataSource:null===(C=v.n.product)||void 0===C||null===(K=C.payments)||void 0===K?void 0:K.map((function(e){return(0,r.Z)({key:"payments".concat(e.id)},e)})),summary:function(e){var t=0;return e.forEach((function(e){var n=e.amount;t+=n})),(0,R.jsxs)(h.Z.Summary.Row,{children:[(0,R.jsx)(h.Z.Summary.Cell,{index:0}),(0,R.jsx)(h.Z.Summary.Cell,{index:1}),(0,R.jsx)(h.Z.Summary.Cell,{index:2}),(0,R.jsx)(h.Z.Summary.Cell,{index:3,children:t>0?t:""})]})},onRow:function(e){return{onDoubleClick:function(){return X((0,r.Z)((0,r.Z)({},e),{},{date:I()(e.date)}),_)}}}})}],he=function(){switch(G){case 1:console.log("new payment item"),ne(O.id,{});break;case 2:console.log("new payment item"),le(O.id,{});break;case 3:console.log("new payment item"),W(O.id,{})}},me=function(){var e,t=0;return null===O||void 0===O||null===(e=O.custOrders)||void 0===e||e.forEach((function(e){t+=e.actCount})),t},Ze={name:"file",action:"http://aruchi.top:1181/api/upload",headers:{authorization:"Basic c29sYXI6NjY2NjY2"},onChange:function(e){var t,n;("uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status)?(n=null===e||void 0===e||null===(t=e.file)||void 0===t?void 0:t.response,P({id:O.id,image:n}),console.log("".concat(e.file.name," file uploaded successfully"))):"error"===e.file.status&&console.log("".concat(e.file.name," file upload failed"))}};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.Z,{orientation:"left",children:function(e){switch(e){case"pending":return"\u6d3d\u8c08\u4e2d";case"studio":return(0,R.jsxs)(R.Fragment,{children:["\u6837\u677f\u4e2d",(0,R.jsx)(m.Z,{type:"vertical"}),(0,R.jsx)(f.Z,{placement:"bottomRight",title:"\u56de\u6eda\u72b6\u6001",description:"\u56de\u9000\u81f3 \u6d3d\u8c08\u9636\u6bb5 ?",onConfirm:function(){return v.n.fallbackStatus(O.id)},children:(0,R.jsx)(c.Z,{style:{color:"red"}})})]});case"factory":return(0,R.jsxs)(R.Fragment,{children:["\u6295\u4ea7\u4e2d",(0,R.jsx)(m.Z,{type:"vertical"}),(0,R.jsx)(f.Z,{placement:"bottomRight",title:"\u56de\u6eda\u72b6\u6001",description:"\u56de\u9000\u81f3 \u6837\u677f\u9636\u6bb5 ?",onConfirm:function(){return v.n.fallbackStatus(O.id)},children:(0,R.jsx)(c.Z,{style:{color:"red"}})})]});case"pending":return"\u5f85\u5c3e\u6b3e";default:return"-"}}(O.productStatus)}),(0,R.jsxs)(A.Z,{direction:"vertical",style:{display:"flex"},children:[(0,R.jsxs)(A.Z,{align:"top",children:[(0,R.jsx)(Z.Z,{width:"200px",height:"300px",src:"".concat("http://aruchi.top:1181/images/").concat(O.image),fallback:"data:image/png;base64,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"}),(0,R.jsxs)(p.Z,{column:1,children:[(0,R.jsx)(p.Z.Item,{label:"\u7f16\u53f7",children:(0,R.jsx)(x.Z.Text,{editable:{onChange:function(e){P({id:O.id,model:e})}},children:O.model})}),(0,R.jsx)(p.Z.Item,{label:"\u6b3e\u5f0f",children:(0,R.jsx)(x.Z.Text,{editable:{onChange:function(e){P({id:O.id,style:e})}},children:O.style})}),(0,R.jsx)(p.Z.Item,{label:"\u677f\u95f4",children:(0,R.jsx)(g.Z,{onChange:U,style:{width:"100%"},defaultValue:null===(F=O.sampleOrder)||void 0===F?void 0:F.studioName,options:[{value:1,label:701},{value:2,label:"\u5176\u4ed6\u677f\u95f4"}]})}),(0,R.jsx)(p.Z.Item,{label:"\u677f\u5e08",children:null!==(T=O.sampleOrder)&&void 0!==T&&T.producerName?(0,R.jsxs)(R.Fragment,{children:[O.sampleOrder.producerName," - ",O.sampleOrder.cost]}):"-"}),(0,R.jsx)(p.Z.Item,{label:"\u4ef6\u6570",children:(0,R.jsxs)(A.Z,{children:[me(),"(",(0,R.jsx)(x.Z.Text,{type:"success",children:Math.round(O.amount/me()*100)/100}),")"]})}),(0,R.jsxs)(p.Z.Item,{label:"\u8d39\u7528",children:[function(){var e,t=0;return null===O||void 0===O||null===(e=O.materials)||void 0===e||e.forEach((function(e){t+=e.amount})),t}()," "]}),(0,R.jsx)(p.Z.Item,{label:"\u5df2\u6536\u6b3e",children:(0,R.jsx)(x.Z.Text,{type:"danger",children:(0,R.jsxs)(A.Z,{children:[(0,R.jsx)(l.Z,{}),function(){var e,t=0;return null===O||void 0===O||null===(e=O.payments)||void 0===e||e.forEach((function(e){e.paid&&(t+=e.amount)})),t}()]})})}),(0,R.jsx)(p.Z.Item,{label:"\u603b\u552e\u4ef7",children:(0,R.jsx)(x.Z.Text,{type:"success",editable:{onChange:function(e){P({id:O.id,amount:e})}},children:(0,R.jsxs)(A.Z,{children:[(0,R.jsx)(d.Z,{}),O.amount>0?O.amount:0]})})})]})]}),(0,R.jsx)(y.Z,(0,r.Z)((0,r.Z)({},Ze),{},{children:(0,R.jsx)(E.ZP,{icon:(0,R.jsx)(u.Z,{}),children:"\u66f4\u65b0\u56fe\u7247"})})),(0,R.jsx)(j.Z,{tabBarExtraContent:{right:(0,R.jsx)(E.ZP,{icon:(0,R.jsx)(s.Z,{}),onClick:function(){return he()},type:"primary",children:"\u65b0\u589e"})},defaultActiveKey:D(),onChange:q,items:fe})]})]})}))},1732:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(7762),i=n(3433),a=n(1413),o=n(5671),c=n(3144),l=n(4098),d=n(3760),u=new(function(){function e(){var t=this;(0,o.Z)(this,e),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.selectd=function(e){t.product=(0,a.Z)({},e)},this.fallbackStatus=function(e){d.Z.get("product/".concat(e,"/fallbackStatus")).then((function(n){t.products=[].concat((0,i.Z)(t.products.filter((function(t){return t.id!==e}))),[n.data])})).catch(console.log)},this.updateFilter=function(e){return t.filter=e},this.new=function(){d.Z.post("product",{}).then((function(e){t.products=[].concat((0,i.Z)(t.products),[e.data])})).catch(console.log)},this.updateProduct=function(e){d.Z.put("product",e).then((function(n){console.log(n.data),t.products=[].concat((0,i.Z)(t.products.filter((function(t){return t.id!==e.id}))),[n.data]),t.product=(0,a.Z)({},n.data)})).catch(console.log)},this.index=function(){d.Z.get("product").then((function(e){t.products=(0,i.Z)(e.data)})).catch((function(e){console.log(e)}))},this.del=function(e){d.Z.delete("product/".concat(e)).then((function(n){return t.products.splice(t.products.findIndex((function(t){return t.id===e})),1)})).catch(console.log)},this.getByFilter=function(){var e=t.products.filter((function(e){return e.productStatus===t.filter}));switch(t.filter){case"pending":return e.sort((function(e,t){return e.cdate-t.cdate}));case"studio":return e.sort((function(e,t){return e.sampleOrder.manufactureDates-t.sampleOrder.manufactureDates}));case"factory":return e.sort((function(e,t){return e.mdate-t.mdate}));default:return e}},this.updateStudio=function(e){console.log(e),d.Z.put("/product/".concat(t.product.id,"/studio"),{id:e}).then((function(e){return t.product=(0,a.Z)((0,a.Z)({},t.product),{},{sampleOrder:e.data})})).catch(console.log)},this.newPayment=function(e,n){d.Z.post("product/".concat(e,"/payment"),(0,a.Z)({},n)).then((function(n){var i,o=(0,r.Z)(t.products);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.id===e&&c.payments.push((0,a.Z)({},n.data))}}catch(l){o.e(l)}finally{o.f()}})).catch(console.error)},this.updatePayment=function(e,n,i){d.Z.put("product/".concat(e,"/payment"),(0,a.Z)({},n)).then((function(n){var o,c=n.data,l=(0,r.Z)(t.products);try{for(l.s();!(o=l.n()).done;){var d=o.value;if(d.id===e){var u=d.payments.findIndex((function(e){return e.id===c.id}));d.payments.splice(u,1,(0,a.Z)({},c))}}}catch(s){l.e(s)}finally{l.f()}i()})).catch(console.error)},this.deletePayment=function(e,n){d.Z.delete("product/".concat(e,"/payment/").concat(n)).then((function(i){var a,o=(0,r.Z)(t.products);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(c.id===e){var l=c.payments.findIndex((function(e){return e.id===n}));c.payments.splice(l,1)}}}catch(d){o.e(d)}finally{o.f()}})).catch(console.error)},this.newCustOrder=function(e,n){d.Z.post("product/".concat(e,"/custOrder"),(0,a.Z)({},n)).then((function(n){var i,o=(0,r.Z)(t.products);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.id===e&&c.custOrders.push((0,a.Z)({},n.data))}}catch(l){o.e(l)}finally{o.f()}})).catch(console.error)},this.updateCustOrder=function(e,n,i){d.Z.put("product/".concat(e,"/custOrder"),(0,a.Z)({},n)).then((function(n){var o,c=n.data,l=(0,r.Z)(t.products);try{for(l.s();!(o=l.n()).done;){var d=o.value;if(d.id===e){var u=d.custOrders.findIndex((function(e){return e.id===c.id}));d.custOrders.splice(u,1,(0,a.Z)({},c))}}}catch(s){l.e(s)}finally{l.f()}i()})).catch(console.error)},this.deleteCustOrder=function(e,n){d.Z.delete("product/".concat(e,"/custOrder/").concat(n)).then((function(i){var a,o=(0,r.Z)(t.products);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(c.id===e){var l=c.custOrders.findIndex((function(e){return e.id===n}));c.custOrders.splice(l,1)}}}catch(d){o.e(d)}finally{o.f()}})).catch(console.error)},this.newMaterials=function(e,n){d.Z.post("product/".concat(e,"/material"),(0,a.Z)({},n)).then((function(n){var i,o=(0,r.Z)(t.products);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.id===e&&c.materials.push((0,a.Z)({},n.data))}}catch(l){o.e(l)}finally{o.f()}})).catch(console.error)},this.updateMaterials=function(e,n,i){d.Z.put("product/".concat(e,"/material"),(0,a.Z)({},n)).then((function(n){var o,c=n.data,l=(0,r.Z)(t.products);try{for(l.s();!(o=l.n()).done;){var d=o.value;if(d.id===e){var u=d.materials.findIndex((function(e){return e.id===c.id}));d.materials.splice(u,1,(0,a.Z)({},c))}}}catch(A){l.e(A)}finally{l.f()}var s=t.product.materials.findIndex((function(e){return e.id===c.id}));t.product.materials.splice(s,1),i()})).catch(console.error)},this.deleteMaterials=function(e,n){d.Z.delete("product/".concat(e,"/material/").concat(n)).then((function(i){var a,o=(0,r.Z)(t.products);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(c.id===e){var l=c.materials.findIndex((function(e){return e.id===n}));c.materials.splice(l,1)}}}catch(u){o.e(u)}finally{o.f()}var d=t.product.materials.findIndex((function(e){return e.id===n}));t.product.materials.splice(d,1)})).catch(console.error)},(0,l.ky)(this)}return(0,c.Z)(e,[{key:"getFilterTemplate",get:function(){var e=this;return this.filterTemplate.forEach((function(t){t.value=e.products.filter((function(e){return e.productStatus===t.key})).length})),this.filterTemplate}}]),e}())}}]);
//# sourceMappingURL=850.5d2c8a83.chunk.js.map