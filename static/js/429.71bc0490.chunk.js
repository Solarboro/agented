"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[429],{2735:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(9439),o=n(2791);function A(){var e="API_KEY",t=(0,o.useState)(localStorage.getItem(e)),n=(0,r.Z)(t,2),A=n[0],i=n[1];return(0,o.useEffect)((function(){A&&localStorage.setItem(e,A)}),[A]),[A,i]}},9429:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(7762),o=n(9439),A=n(2622),i=n(5485),a=n(6185),s=n(5820),c=n(2339),u=n(1429),l=n(7309),E=n(7128),d=n(4248),g=n(9657),Q=n(8792),h=n(2242),f=n(2735),m=(n(3742),n(9529)),B=n(8999),p=n(7846),I=n(9389),C=n(184);var Z=n(1413),N=n(3144),k=n(5671),j=n(4098),S=n(1243).Z.create({baseURL:"http://aruchi.top:1182",timeout:3e3});S.interceptors.request.use((function(e){return console.info(e),localStorage.getItem("API_KEY")&&"login"!==e.url&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("API_KEY"))),e}),(function(e){return Promise.reject(e)})),S.interceptors.response.use((function(e){return e}),(function(e){return console.info("start"),console.info(e),console.info("end"),Promise.reject(e)}));var J=S,v=new((0,N.Z)((function e(){var t=this;(0,k.Z)(this,e),this.user=JSON.parse(localStorage.getItem("user"))||{},this.login=function(e,n,r){var o=e.username,A=e.password;J.post("login",{username:o,password:A},{headers:{Authorization:""}}).then((function(e){t.user=(0,Z.Z)({},e.data.iuser),localStorage.setItem("user",JSON.stringify(t.user)),n(e.data.token)})).catch((function(e){var t,n;r.info(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}))},(0,j.ky)(this)}))),y=n(7257),x=n(3433),K=new(function(){function e(){var t=this;(0,k.Z)(this,e),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.products=[],this.updateFilter=function(e){return t.filter=e},this.new=function(){J.post("product",{}).then((function(e){t.products=[].concat((0,x.Z)(t.products),[e.data])})).catch(console.log)},this.index=function(){J.get("product").then((function(e){t.products=(0,x.Z)(e.data)})).catch((function(e){console.log(e)}))},this.del=function(e){J.delete("product/".concat(e)).then((function(n){return t.products.splice(t.products.findIndex((function(t){return t.id===e})),1)}))},this.getByFilter=function(){var e=t.products.filter((function(e){return e.productStatus===t.filter}));switch(t.filter){case"pending":return e.sort((function(e,t){return e.cdate-t.cdate}));case"studio":return e.sort((function(e,t){return e.sampleOrder.manufactureDates-t.sampleOrder.manufactureDates}));case"factory":return e.sort((function(e,t){return e.mdate-t.mdate}));default:return e}},(0,j.ky)(this)}return(0,N.Z)(e,[{key:"getFilterTemplate",get:function(){var e=this;return this.filterTemplate.forEach((function(t){t.value=e.products.filter((function(e){return e.productStatus===t.key})).length})),this.filterTemplate}}]),e}());n(7892),i.Z.Title;var R=(0,y.Pi)((function(){var e=a.Z.useApp().message,t=function(){var e=a.Z.useApp().modal,t=p.Z.useForm(),n=(0,o.Z)(t,1)[0],r=(0,C.jsxs)(p.Z,{size:"middle",preserve:!1,form:n,initialValues:{username:"solar",password:"abcd1234"},children:[(0,C.jsx)(p.Z.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7!"}],children:(0,C.jsx)(I.Z,{prefix:(0,C.jsx)(m.Z,{className:"site-form-item-icon"}),placeholder:"Username / \u8d26\u6237 / \u624b\u673a\u53f7"})}),(0,C.jsx)(p.Z.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}],children:(0,C.jsx)(I.Z,{prefix:(0,C.jsx)(B.Z,{className:"site-form-item-icon"}),type:"password",placeholder:"Password / \u5bc6\u7801"})})]});return function(t){e.confirm({icon:!0,title:"\u7528\u6237\u767b\u5f55",okText:"\u767b\u5f55",onOk:function(e){n.validateFields().then((function(n){return t(n,e)})).catch(console.info)},content:r})}}(),n=(0,f.Z)(),i=(0,o.Z)(n,2),Z=(i[0],i[1]),N=function(t,n){v.login(t,(function(e){Z(e),n()}),e)},k=function(e){var t=[],n=(0,C.jsx)("a",{children:"\u7f16\u8f91"}),o=(0,C.jsxs)(s.Z,{placement:"topRight",title:"\u4ea7\u54c1\u79fb\u9664",description:"".concat(e.style,"-").concat(e.model),onConfirm:function(){return K.del(e.id)},okText:"Yes",cancelText:"No",children:[(0,C.jsx)(A.Z,{style:{color:"red"}})," \u79fb\u9664"]}),i=(0,C.jsxs)(c.Z,{color:"success",children:[e.sampleOrder.studioName," ",e.sampleOrder.producerName?e.sampleOrder.producerName+" "+e.sampleOrder.cost+" \u5c0f\u65f6":"\u6392\u961f\u4e2d"]});switch(e.productStatus){case"pending":t.push(o);break;case"studio":t.push(i);break;case"factory":var a,u=0,l=(0,r.Z)(e.materials);try{for(l.s();!(a=l.n()).done;){u+=a.value.amount}}catch(d){l.e(d)}finally{l.f()}var E=(0,C.jsxs)(c.Z,{color:"error",children:[u," \u5143"]});t.push(E)}return t.push(n),t};return(0,C.jsxs)(C.Fragment,{children:[v.user.fullname,(0,C.jsx)(l.ZP,{onClick:function(){return t(N)},children:"called"}),(0,C.jsx)(l.ZP,{onClick:function(){return K.index()},children:"products"}),(0,C.jsx)(E.Z,{orientation:"left",children:"\u6982\u8981"}),(0,C.jsx)(d.Z,{default:K.filter,onChange:K.updateFilter,block:!0,options:K.getFilterTemplate.map((function(e){return{label:(0,C.jsx)(u.Z,{title:e.title,value:e.value,valueStyle:{color:e.color}}),value:e.key}}))}),(0,C.jsx)(g.Z,{children:(0,C.jsx)(Q.ZP,{size:"middle",itemLayout:"horizontal",pagination:{pageSize:5,simple:!0,position:"bottom",align:"end"},dataSource:K.getByFilter(),renderItem:function(e){return(0,C.jsx)(Q.ZP.Item,{actions:k(e),children:(0,C.jsx)(Q.ZP.Item.Meta,{avatar:(0,C.jsx)(h.Z,{width:30,height:40,src:"error",fallback:"data:image/png;base64,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"}),title:(0,C.jsxs)(C.Fragment,{children:[e.style," "]}),description:e.model})})}})}),(0,C.jsx)("br",{}),(0,C.jsx)(l.ZP,{onClick:function(){return K.new()},size:"large",type:"primary",block:!0,children:" \u5ba2\u5355\u6dfb\u52a0 "})]})}))}}]);
//# sourceMappingURL=429.71bc0490.chunk.js.map