"use strict";(self.webpackChunkagented=self.webpackChunkagented||[]).push([[767],{1767:function(t,n,e){e.r(n);var c=e(9439),o=e(2791),r=e(1732),i=e(7257),u=e(7128),s=e(3099),a=e(6473),d=e(3655),l=e(9555),p=e(2706),f=e(8792),h=e(7174),Z=e(5273),m=e(184);n.default=(0,i.Pi)((function(){var t=r.n.statistic701Period,n=r.n.statistic701PeriodFilter,e=r.n.statistic701Producer,i=r.n.statistic701ProducerFilter,x=r.n.statistic701,g=r.n.get701Statistic,v=(0,o.useState)(7500),y=(0,c.Z)(v,2),P=y[0],j=y[1];(0,o.useEffect)((function(){g()}),[]);var k=function(){return x.filter((function(t){return t.period===n})).filter((function(t){return t.producer===i}))},w=function(){var t=0,n=0;return k().forEach((function(e){t+=e.cost,n+=e.count})),{cost:t,count:n}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.Z,{orientation:"left",children:"\u7edf\u8ba1"}),(0,m.jsxs)(s.Z,{direction:"vertical",style:{display:"flex"},children:[(0,m.jsx)(a.Z,{children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(d.Z.Text,{children:"\u677f\u671f"}),(0,m.jsx)(l.Z,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100px"},value:n,onChange:function(t){return r.n.statistic701PeriodFilter=t},options:null===t||void 0===t?void 0:t.map((function(t){return{value:t,label:t}}))}),(0,m.jsx)(d.Z.Text,{children:"\u677f\u5e08"}),(0,m.jsx)(l.Z,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100px"},value:i,onChange:function(t){return r.n.statistic701ProducerFilter=t},options:null===e||void 0===e?void 0:e.map((function(t){return{value:t,label:t}}))})]})}),(0,m.jsx)(a.Z,{children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(d.Z.Text,{children:"\u85aa\u8d44"}),(0,m.jsx)(p.Z,{style:{width:"100px"},value:P,onChange:j})]})}),(0,m.jsx)(a.Z,{title:(0,m.jsxs)(s.Z,{children:[n," ",i," ",w().cost,"\u65f6 ",w().count,"\u4ef6"]}),children:(0,m.jsx)(f.ZP,{dataSource:k(),renderItem:function(t){return(0,m.jsx)(f.ZP.Item,{children:(0,m.jsxs)(h.Z,{column:2,children:[(0,m.jsxs)(h.Z.Item,{label:t.agent,children:[Math.round(t.cost/w().cost*P*100)/100," \u5143"]}),(0,m.jsx)(h.Z.Item,{label:"".concat(t.cost,"\u65f6 / ").concat(t.count,"\u4ef6"),children:(0,m.jsx)(Z.Z,{strokeColor:{"0%":"#006564","100%":"#87d068"},percent:Math.round(t.cost/w().cost*1e4)/100})})]})})}})})]})]})}))},1732:function(t,n,e){e.d(n,{n:function(){return d}});var c=e(1413),o=e(3433),r=e(5671),i=e(3144),u=e(4098),s=e(3760),a=e(383),d=new(function(){function t(){var n=this;(0,r.Z)(this,t),this.filterTemplate=[{key:"pending",title:"\u6d3d\u8c08\u4e2d",value:0,color:"#3f8600"},{key:"studio",title:"\u6837\u677f\u4e2d",value:0,color:"#f56a00"},{key:"factory",title:"\u6295\u4ea7\u4e2d",value:0,color:"#f56a00"},{key:"paid",title:"\u5f85\u5c3e\u6b3e",value:0,color:"#cf1322"}],this.filter="pending",this.product={},this.products=[],this.studio701Products=[],this.statistic701=[],this.statistic701Period=[],this.statistic701PeriodFilter="",this.statistic701Producer=[],this.statistic701ProducerFilter="",this.paymentDetail={},this.get701Statistic=function(){s.Z.get("/statistic/studio/701").then((function(t){n.statistic701=(0,o.Z)(t.data),n.statistic701Period=(0,o.Z)(new Set(n.statistic701.map((function(t){return t.period})))),n.statistic701Producer=(0,o.Z)(new Set(n.statistic701.map((function(t){return t.producer})))),console.log(n.statistic701Period),console.log(n.statistic701Producer)})).catch(console.log)},this.get701Products=function(){s.Z.get("product/701").then((function(t){return n.studio701Products=(0,o.Z)(t.data)})).catch(console.log)},this.setPaymentDetail=function(t){n.paymentDetail=(0,c.Z)({},t)},this.selectd=function(t){n.product=(0,c.Z)({},t)},this.fallbackStatus=function(t){s.Z.get("product/".concat(t,"/fallbackStatus")).then((function(e){n.products=[].concat((0,o.Z)(n.products.filter((function(n){return n.id!==t}))),[e.data])})).catch(console.log)},this.updateFilter=function(t){return n.filter=t},this.new=function(){s.Z.post("product",{}).then((function(t){n.products=[].concat((0,o.Z)(n.products),[t.data])})).catch(console.log)},this.updateProduct=function(t){s.Z.put("product",t).then((function(t){n.products=[].concat((0,o.Z)(n.products.filter((function(n){return n.id!==t.data.id}))),[t.data]),n.product=(0,c.Z)({},t.data)})).catch(console.log)},this.index=function(){s.Z.get("product").then((function(t){n.products=(0,o.Z)(t.data)})).catch((function(t){console.log(t)}))},this.del=function(t){s.Z.delete("product/".concat(t)).then((function(e){return n.products.splice(n.products.findIndex((function(n){return n.id===t})),1)})).catch(console.log)},this.getByFilter=function(){var t=n.products.filter((function(t){return t.productStatus===n.filter}));switch(n.filter){case"pending":case"studio":case"factory":return t.sort((function(t,n){return t.cdate-n.cdate}));default:return t}},this.updateStudio=function(t){console.log(t),s.Z.put("product/".concat(n.product.id,"/studio"),{id:t}).then((function(t){n.product=(0,c.Z)((0,c.Z)({},n.product),{},{sampleOrder:t.data}),n.products.splice(n.products.findIndex((function(t){return t.id===n.product.id})),1,n.product)})).catch(console.log)},this.updateStudioDetail=function(t,e){s.Z.put("product/".concat(t,"/sample"),e).then((function(t){return n.get701Products()})).catch(console.log)},this.newPayment=function(t,e){s.Z.post("product/".concat(t,"/payment"),(0,c.Z)({},e)).then((function(t){n.product.payments.push((0,c.Z)({},t.data))})).catch(console.error)},this.updatePayment=function(t,e,o){s.Z.put("product/".concat(t,"/payment"),(0,c.Z)({},e)).then((function(t){var e=t.data,r=n.product.payments.findIndex((function(t){return t.id===e.id}));n.product.payments.splice(r,1,(0,c.Z)({},e)),o()})).catch(console.error)},this.deletePayment=function(t,e){s.Z.delete("product/".concat(t,"/payment/").concat(e)).then((function(t){var c=n.product.payments.findIndex((function(t){return t.id===e}));n.product.payments.splice(c,1)})).catch(console.error)},this.newCustOrder=function(t,e){s.Z.post("product/".concat(t,"/custOrder"),(0,c.Z)({},e)).then((function(t){n.product.custOrders.push((0,c.Z)({},t.data))})).catch(console.error)},this.updateCustOrder=function(t,e,o){s.Z.put("product/".concat(t,"/custOrder"),(0,c.Z)({},e)).then((function(t){var e=t.data,r=n.product.custOrders.findIndex((function(t){return t.id===e.id}));n.product.custOrders.splice(r,1,(0,c.Z)({},e)),o()})).catch(console.error)},this.deleteCustOrder=function(t,e){s.Z.delete("product/".concat(t,"/custOrder/").concat(e)).then((function(t){var c=n.product.custOrders.findIndex((function(t){return t.id===e}));n.product.custOrders.splice(c,1)})).catch(console.error)},this.newMaterials=function(t,e){s.Z.post("product/".concat(t,"/material"),(0,c.Z)({},e)).then((function(t){n.product.materials.push((0,c.Z)({},t.data))})).catch(console.error)},this.updateMaterials=function(t,e,o){s.Z.put("product/".concat(t,"/material"),(0,c.Z)({},e)).then((function(t){var e=t.data,r=n.product.materials.findIndex((function(t){return t.id===e.id}));n.product.materials.splice(r,1,(0,c.Z)({},e)),o()})).catch(console.error)},this.deleteMaterials=function(t,e){s.Z.delete("product/".concat(t,"/material/").concat(e)).then((function(t){var c=n.product.materials.findIndex((function(t){return t.id===e}));n.product.materials.splice(c,1)})).catch(console.error)},(0,u.ky)(this),a.H.isLogin&&this.index()}return(0,i.Z)(t,[{key:"getFilterTemplate",get:function(){var t=this;return this.filterTemplate.forEach((function(n){n.value=t.products.filter((function(t){return t.productStatus===n.key})).length})),this.filterTemplate}}]),t}())}}]);
//# sourceMappingURL=767.0e6b1eab.chunk.js.map